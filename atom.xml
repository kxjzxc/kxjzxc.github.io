<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>kxj&#39;s Eden</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://kxjzxc.github.io/"/>
  <updated>2019-10-27T13:54:39.402Z</updated>
  <id>http://kxjzxc.github.io/</id>
  
  <author>
    <name>Kermit</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>关于四害驱赶家用机器人声武器系统这个坑</title>
    <link href="http://kxjzxc.github.io/%E5%85%B3%E4%BA%8E%E5%9B%9B%E5%AE%B3%E9%A9%B1%E8%B5%B6%E5%AE%B6%E7%94%A8%E6%9C%BA%E5%99%A8%E4%BA%BA%E5%A3%B0%E6%AD%A6%E5%99%A8%E7%B3%BB%E7%BB%9F%E8%BF%99%E4%B8%AA%E5%9D%91.html"/>
    <id>http://kxjzxc.github.io/关于四害驱赶家用机器人声武器系统这个坑.html</id>
    <published>2019-09-02T09:45:02.000Z</published>
    <updated>2019-10-27T13:54:39.402Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script>    <div id="aplayer-whNsBWeZ" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="17822784" data-server="netease" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#555"></div><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>昨天早上，历时半年多的大一立项终于完成了最后的答辩。<br>“四害驱赶家用机器人声武器系统的研制”，这是去年年底我们的导师给毫无想法的我们选定的课题。在仓促的几天中完成立项并且答辩成功后，我们就在这个坑中渐行渐远。从一开始的一脸懵逼，充满怀疑，到最后的彻底绝望，自暴自弃，我们理所当然地并没有做出什么成果。<br>虽然这个项目做得一塌糊涂，而且无甚成果，但是……嗯，但是，好歹完成了答辩。心想着深压硬盘底也没什么用，倒不如发布到博客上，也算是给他人排排雷。</p><h1 id="课题背景"><a href="#课题背景" class="headerlink" title="课题背景"></a>课题背景</h1><p>自古以来，四害问题一直困扰着人类。<br>传统的驱逐和消灭方法效率低。经过网上国内外的查询，发现并没有较为有效的驱逐四害的方法，大多数是以人为驱逐的方式，但效率不高；也有药物驱逐，但对人体的身体健康有着危害。</p><p>我们小组决定使用人耳听觉频段范围外的声波驱逐四害，原因主要有：</p><ol><li>由于声波本身是无形的，所以并不会像化学药剂一样污染环境。</li><li>将声波调到合理的强度，对人的危害远小于化学药剂所造成的危害。</li><li>不会对人的日常生活工作造成影响。</li></ol><p>综上所述，我组决定制作出一种小型的，能够发出可以让四害感到不适却又在人耳听觉频段范围外的声波驱逐四害，且具有指向性的声武器装置，并将其装在可自动导航的小车之上，使其可以边运动边发出次声以驱逐四害。</p><h1 id="开始探索"><a href="#开始探索" class="headerlink" title="开始探索"></a>开始探索</h1><p>通过查阅资料以及导师的指导，我组在经过多次讨论之后，确定了两个不同的声武器驱逐四害的方案。<br>两个方案分别是次声波驱逐方案和高功率超声波驱逐方案。以下是两个方案的详细介绍。</p><h2 id="次声波驱逐方案"><a href="#次声波驱逐方案" class="headerlink" title="次声波驱逐方案"></a>次声波驱逐方案</h2><h3 id="研究"><a href="#研究" class="headerlink" title="研究"></a>研究</h3><p>根据了解，次声波频率与生物体自身的振荡频率相似，容易发生共振，产生极大能量，使四害感到不适，达到驱逐的效果。<br>因此，可以搭建一个可控次声装置，使其朝设定方向发射强次声波，达到驱除四害的目的。<br>在研究如何产生次声波方面，我组通过大量的资料查询以及数学公式推断，发现<strong>两束频率相近的声波可以在空气中线性叠加产生频率为差频的次声波</strong>。<br>公式推导如下：<br>假设两列振幅相同的，频率不同的次声波：<br>$φ1(t,x)＝Asin(ω1t＋k1x)φ2(t,x)＝Asin(ω2t＋k2x)$<br>相加并通过一系列三角变换可得：<br>$φ(t,x)＝2Acos(ωt＋kx)cos(ω′t＋k′x)$<br>$ω＝(ω1＋ω2)╱2ω′＝(ω1－ω2)╱2k＝(k1＋k2)╱2k′＝(k1－k2)╱2$</p><p>由此可得叠加后产生了一个振动频率为和频，振幅变化频率为差频的波形。</p><p>以下是在MATLAB仿真出来的两组结果：<br><img src="图1.png" alt="图1.波频率1000hz和1020hz的MATLAB仿真程序"><br><img src="图2.png" alt="图2.波频率1000hz和1020hz的仿真结果图"><br><img src="图3.png" alt="图3.波频率22700hz和22720hz的MATLAB仿真程序"><br><img src="图4.png" alt="图4.波频率22700hz和22720hz的仿真结果图"></p><p>仿真的结果验证了我们的猜测，两束频率相近的声波的确可以在空气中线性叠加产生频率为差频的次声波。根据这个性质，我们可以先产生两束高频波，然后通过一定的相位差，使其在空气中线性叠加产生次声波。</p><h3 id="难题"><a href="#难题" class="headerlink" title="难题"></a>难题</h3><p>在实施次声波方案的过程中，我组遇到了两个难以克服的困难：</p><ol><li><strong>难以产生两束频率相差小于20hz的超声波</strong><br> 我们产生次声波的方案是通过两束频率相近的超声波在空气中线性叠加后产生频率为差频的次声波。因此我们需要先产生两束频率相近的超声波。现有的产生超声波的方式为通过探头将正弦波或是方波转换为同频率的声波，然而这种方式非常依赖硬件，也就是探头。每一种探头的型号只能够加载相应频率的信号波，并发出同种频率的超声波。比如40khz的探头只能够加载40khz的信号波，发出40khz的超声波。<br> 市面上探头的种类有很多，我们能够找到23khz、25khz、40khz等型号的探头，但是大多相差好几k频率，与之相比20hz的差频几乎可以忽略不记。因此在如今硬件水平上，我们难以寻找适合我们的，可以产生两束频率差小于20hz的探头。</li><li><strong>市面上买不到合适且有效的次声波传感器</strong><br> 虽然我们的方案并不需要检测产生的次声波，但是在实验过程中检测次声波却是必不可少的。我们不仅需要通过检测次声波来验证我们是否成功产生我们所需要的次声波，还需要记录产生次声波的频率对于实验对象的影响程度。<br> 检测次声波需要相应的硬件，也就是次声传感器。不同于检测非次声的传感器，市面上几乎没有合适的次声波传感器。虽有极少数的商品贩卖，但是不仅价格昂贵，而且多为接触式传感器，完全不符合我们的需求。而网络上虽有许多关于次声波传感器研发的论文与专利，但是大多需要特殊的材料或者不是非常靠谱的理论，以我们的能力很难去自己搭建合适的次声传感器。</li></ol><p>因此次声波方案无法实现。</p><h2 id="高功率超声波驱逐方案"><a href="#高功率超声波驱逐方案" class="headerlink" title="高功率超声波驱逐方案"></a>高功率超声波驱逐方案</h2><h3 id="研究-1"><a href="#研究-1" class="headerlink" title="研究"></a>研究</h3><p>通过查阅资料，我组得知有特定频率的超声波会令害虫或者老鼠的听觉系统感到不适的声音（<strong>此已被证伪</strong>）。因此可以使用超声波来驱逐四害（基本上不行）。<br>根据我组的调查，市场上已有许多使用超声波驱逐四害的装置，像是超声波驱鼠器、超声波驱蚊器之类的，但是效果大多不够显著。我组认为是超声波的功率不够导致达到所需的目的。<br>已知超声波传播带来的能量与超声波的功率有关，如果能够将超声波的功率放大，发出的声场就可以具有高强度的能量，起到驱赶四害的效果。<br>所以如何产生高功率的超声波就成为了我组的研究内容。<br>在这方面，我组的想法是通过放大器模块放大由单片机和dds模块产生的正弦信号波，再加载到相应频率的探头上。<br>为此，我组制定了以下初步方案：</p><ol><li>首先通过程序使单片机发出频率控制字，分别输入到dds模块中。</li><li>由dds模块产生高频率的正弦波信号。</li><li>使用放大器模块将产生的正弦波信号放大功率，然后加载到相应频率的超声探头上。</li></ol><p>大致结构如下图所示：<br><img src="图5.png" alt="图5. 高功率超声波电路结构"><br>我们采用的放大器模块为LM386，但是事实上，市面上的放大器模块的放大功率的效果并不是特别好，在限定工作电压范围内，大多无法满足放大到我们需求的倍数，所以我们需要寻找另一种放大超声波功率的方案。<br>受到我们的师兄正在研究基于相控阵的超声悬浮的启发，我组认为通过使用多个探头组成相控阵，发出相同频率的超声波，并且调整激励信号与声源的几何位置，使其满足一定的关系，可以将产生的超声波能够在某一固定点处相叠加，产生高强度的声波能量，从而达到放大功率的效果。<br>根据师兄提供的论文，该相列阵的电路结构大致如图所示：<br><img src="图6.png" alt="图6. 超声阵列电路结构图"><br>用FPGA电路板作为控制模块，将信号传递给驱动板。然后由驱动板驱动相应的排成阵列的探头，产生相应频率的超声波。超声波将在空气中某一点聚焦，成为高功率的声波。<br>但是由于我组能力上的不足，尽管理论与方案都已给出，未能完成超声相控阵列，只能完成使用放大器模块放大超声波的方案。</p><h3 id="实验结果"><a href="#实验结果" class="headerlink" title="实验结果"></a>实验结果</h3><p>以下是我们通过示波器检测到波功率的结果。<br>放大器外接电压/V|波频率/HZ|正弦波信号/接收到的超声波|峰值/V<br>:–|:–:|:–:<br>5|23k|接收到的超声波|15.4<br>5|40k|接受到的超声波|46.4<br>5|40k|正弦波信号|10.8<br>11|23k|正弦波信号|25.6<br>11|40k|正弦波信号|44<br>11|40|接收到的超声波|102</p><p><img src="图7.png" alt="图7. 外加11V电压时40khz正弦波信号，峰值为44V"><br><img src="图8.png" alt="图8. 外加11V电压时接受到的40khz超声波波形，峰值为102V"><br>虽然我们利用放大器成功放大了产生的超声波，但是放大的倍数仅为原先的两倍，效果不是非常的好。<br>而且由于各种现实条件以及自身经验缺乏的原因，我组未能定制最后检验效果的实验方案，没有进行最终的检测。<br>首先是实验动物的缺失，学校里没有动物中心这类地方，我组也未能联系到提供实验动物的机构。如果自己捕获四害的话，没有合适的处理方式，会导致实验的正确性不高。再有我组并没有动物实验的经验，对于实验的步骤与实验结果的分析都毫无头绪。</p><p><strong>综上所述，我们的方案并没能经过实验的验证。</strong></p><h1 id="结束语"><a href="#结束语" class="headerlink" title="结束语"></a>结束语</h1><p>如果你看完了这篇博文，你自然可以明白我们的项目是多么的水，多么的不切实际。不仅硬件上碰到困难，理论上无法证实，动物实验不会做，本身能学到的东西也是少的可怜。<br>我们最初的方案就只有次声波，超声波的方案是次声波方案确认无法继续之后才临时决定的，虽然这个方案从原理上就是错误的。<br><a href="https://www.guokr.com/article/49122/" target="_blank" rel="noopener">声波驱蚊？一直在坑爹，从未生过效</a></p><p>做到最后，我们只剩下拿到这门课的学分这一目的。用尽全力充实自己的报告和ppt，将自己的项目包装成很丰富，很充实的样子。但无论再怎么充实，终究也只是伪物，看到别组诸如体感小车，寻物机器人之类的牛逼项目，还是忍不住叹气，感觉自己浪费了大一立项的大好机会。</p><p>说到底应该算是最初项目选择上的锅。<strong>本来就没有什么经验的大一学生，应该选择在已有的成熟的产品基础上进行二次开发，而不是愣头青一般往不怎么可靠的方向乱窜。</strong>虽然我们也是往小车上安装声武器，但是声武器本身就没有成熟的理论支持，而且极其依赖硬件设施。而这些都成为了阻挡我们的高墙，逐渐消磨我们的热情，也慢慢浪费着我们的时间，因为我们基本上没能从中获得的我们所需要的东西和热情。</p><p>相比于这个不适合我们的项目，我觉得我实习期间所做的机械臂项目都要有用高级的多。而有时我脑海中也会蹦出几个容易做且有趣的项目，像是自主移动的风扇机器人之类的，只可惜立项之时脑袋中空空如也。</p><p>事到如今，大一项目也已经结束，该水的也水完了，除了叹气并总结一下经验也没有什么可以改变的。听说大二还有大创，希望这次我能够做出个好东西来。</p>]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
      <category term="项目" scheme="http://kxjzxc.github.io/categories/%E9%A1%B9%E7%9B%AE/"/>
    
    
  </entry>
  
  <entry>
    <title>基于OpenCV和Zbar的识别二维码控制机械臂</title>
    <link href="http://kxjzxc.github.io/%E5%9F%BA%E4%BA%8EOpenCV%E5%92%8CZbar%E7%9A%84%E8%AF%86%E5%88%AB%E4%BA%8C%E7%BB%B4%E7%A0%81%E6%8E%A7%E5%88%B6%E6%9C%BA%E6%A2%B0%E8%87%82.html"/>
    <id>http://kxjzxc.github.io/基于OpenCV和Zbar的识别二维码控制机械臂.html</id>
    <published>2019-08-13T08:55:14.000Z</published>
    <updated>2019-10-27T13:57:50.221Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在越疆实习的时候并没有问部门里的人自己该干什么，所以似乎也没有什么任务交给我做。由于在培训的时候接触到了ROS，也就顺水推舟地朝着这个方向学了下去。第一周学习用ROS控制机械臂，消息、服务、启动文件之类的也都了解了大概。接下来就试着朝Opencv这一方面研究，在完成打开摄像头，人脸识别等简单项目后，我脑中浮现出了这个项目，二维码控制机器人。<br>这个构思的诞生，说来也是意外之思。当时我做完人脸识别项目后，看到《ROS机器人开发实践》这本书上后面的二维码识别,联想到其他班的同学的一个轮式机器人编队的项目，听说他那个项目中是通过二维码来确定小车的位置。于是我就想，我是不是也可以通过二维码传输指令给机械臂，以此控制机械臂运动呢？深入思考之后，发现可行，网上也有识别二维码的代码，只要将两者合在一块就能实现了。<br>虽说书上是有二维码识别的讲述，但是我并没有采用上面的方法。原因很简单，因为我并没有向部门里的人要摄像头，所以我现有的设备除了机械臂和气泵装置外，只有我笔记本自带的摄像头了。而书上的方法第一步就将我卡住了，因为它需要标定摄像头。我寻思着我这破摄像头也没法标定啊，只能放弃这个方法。所幸，根据之前做人脸识别的经验，我想到只要对摄像头获取的每一帧进行图像处理，即视觉识别即可。<br>终于，经过几天的查资料，自己折腾，我顺利做出了一个简单的版本。</p><h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><p>运用OpenCV库调取摄像头的画面，然后使用Zbar库中的函数扫描画面，获取画面中存在的二维码的信息，并以ros消息的形式发布到话题上，由客户端节点订阅到话题上的消息后，调用加载到服务端的动态链接库来控制机械臂执行相应的命令</p><h1 id="搭建开发环境"><a href="#搭建开发环境" class="headerlink" title="搭建开发环境"></a>搭建开发环境</h1><h2 id="Linux系统"><a href="#Linux系统" class="headerlink" title="Linux系统"></a>Linux系统</h2><p>我使用的是Ubuntu 18.04。安装Linux系统的教程网上很多，自行寻找。</p><h2 id="机器人操作系统ROS"><a href="#机器人操作系统ROS" class="headerlink" title="机器人操作系统ROS"></a>机器人操作系统ROS</h2><p>从官网上安装对应linux系统的ROS，步骤很详细，一步一步照做即可</p><h2 id="OpenCV库"><a href="#OpenCV库" class="headerlink" title="OpenCV库"></a>OpenCV库</h2><p>ROS中已经集成了OpenCV库以及相关接口功能包，如果你安装的是全桌面版的ROS，那么电脑中大概已经有OpenCV了。如果电脑中并没有OpenCV，那么可以通过以下命令来安装：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install ros-kinetic-vision-opencv libopencv-dev python-opencv</span><br></pre></td></tr></table></figure></p><p>其中ros-kinetic-vision-opencv中的kinetic可以替换成相应的ros版本</p><h2 id="Zbar库"><a href="#Zbar库" class="headerlink" title="Zbar库"></a>Zbar库</h2><blockquote><p>ZBar是一个开源库,用于扫描、读取二维码和条形码。</p></blockquote><p>通过Zbar，我们可以扫描图像，检测其中的二维码，并且解析出其中的消息。<br>要在Ubuntu中使用Zbar，我们首先要安装Zbar库。下面是安装步骤：</p><ol><li><p>通过命令行直接下载zbar</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget http://downloads.sourceforge.net/project/zbar/zbar/0.10/zbar-0.10.tar.gz</span><br></pre></td></tr></table></figure></li><li><p>进入压缩包所在的文件夹直接解压</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tar -zvxf zbar-0.10.tar.gz</span><br></pre></td></tr></table></figure></li><li><p>安装相关依赖</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ sudo apt-get install python-gtk2-dev</span><br><span class="line">$ sudo apt-get install libqt4-dev</span><br></pre></td></tr></table></figure></li><li><p>编译Zbar</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ ./configure --enable-shared --disable-video --without-python --without-gtk --without-qt --without-imagemagick CFLAGS=&quot;&quot;</span><br><span class="line">$make </span><br><span class="line">$sudo make install</span><br><span class="line">$sudo ldconfig</span><br></pre></td></tr></table></figure></li><li><p>运行examples</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$cd example</span><br><span class="line">$gcc scan_image.c -o scan_image -lzbar -lpng</span><br><span class="line">$./scan_image barcode.png</span><br></pre></td></tr></table></figure><p> 输出结果：</p><pre><code>decoded EAN-13 symbol &quot;9876543210128&quot;</code></pre></li></ol><h1 id="运行流程"><a href="#运行流程" class="headerlink" title="运行流程"></a>运行流程</h1><p>先由qrcode包中的my_pulisher节点打开摄像头，获取画面并且以消息的形式发布到话题“camera/image”上。<br>然后由my_subscriber节点扫描从话题“camera/image”上订阅到的图像。如果从图像中扫描到图像中的二维码，那么将解析出来的指令信息发布到话题“GetCtrl_msg”上。<br>最后由dobot包中的DobotClient_PTP节点订阅话题”GetCtrl_msg”上的指令，并根据指令，向服务端DobotServer节点请求相应的服务，控制机械臂。</p><h1 id="代码分析"><a href="#代码分析" class="headerlink" title="代码分析"></a>代码分析</h1><p><a href="https://github.com/kxjzxc/ROS_demo" target="_blank" rel="noopener">代码位置</a></p><h2 id="my-publisher"><a href="#my-publisher" class="headerlink" title="my_publisher"></a>my_publisher</h2><p>该节点是打开摄像头，并获取摄像头图像消息，发布到话题”camera/image”的代码。</p><p>程序1.1加载ROS、Opencv头文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;ros/ros.h&gt;  </span><br><span class="line">#include &lt;image_transport/image_transport.h&gt;  </span><br><span class="line">#include &lt;opencv2/highgui/highgui.hpp&gt;  </span><br><span class="line">#include &lt;cv_bridge/cv_bridge.h&gt;  </span><br><span class="line">#include &lt;sstream&gt; // for converting the command line parameter to integer</span><br></pre></td></tr></table></figure></p><p>程序1.2初始化节点<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ros::init(argc, argv, &quot;image_publisher&quot;);</span><br><span class="line">ros::NodeHandle nh;</span><br></pre></td></tr></table></figure></p><p>程序1.3注册话题到ROS Master上<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">image_transport::ImageTransport it(nh);  </span><br><span class="line">image_transport::Publisher pub = it.advertise(&quot;camera/image&quot;, 1);  //在发布图像消息时消息队列的长度只能是1</span><br></pre></td></tr></table></figure></p><p>程序1.4 打开摄像头<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">// Convert the passed as command line parameter index for the video device to an integer</span><br><span class="line">int video_source;  </span><br><span class="line">bool check=ros::param::get(&quot;/image_publisher/video&quot;,video_source);</span><br><span class="line"></span><br><span class="line">/*检查视频源是否已作为参数传递*/ </span><br><span class="line">if(check == 0)   </span><br><span class="line">&#123;  </span><br><span class="line">    ROS_INFO(&quot;no camera %d\n&quot;,video_source);  </span><br><span class="line">    return 1;  </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">cv::VideoCapture cap(video_source);  </span><br><span class="line">//判断视频读取或者摄像头调用是否成功</span><br><span class="line">if(!cap.isOpened())   </span><br><span class="line">&#123;  </span><br><span class="line">    ROS_INFO(&quot;can not opencv video device\n&quot;);  </span><br><span class="line">    return 1;  </span><br><span class="line">&#125;  </span><br><span class="line">程序1.5 发布摄像头图像消息到话题”camera/image”上</span><br><span class="line">//ROS中的图像消息类型</span><br><span class="line">sensor_msgs::ImagePtr msg;  </span><br><span class="line">ros::Rate loop_rate(5);  </span><br><span class="line">while (nh.ok()) </span><br><span class="line">&#123;  </span><br><span class="line">    cap &gt;&gt; frame;  </span><br><span class="line">    // Check if grabbed frame is actually full with some content  </span><br><span class="line">    if(!frame.empty()) </span><br><span class="line">    &#123;  </span><br><span class="line">     //将opencv格式的图像转化为ROS所支持的消息类型</span><br><span class="line">            msg = cv_bridge::CvImage(std_msgs::Header(), &quot;bgr8&quot;, frame).toImageMsg();  </span><br><span class="line">            pub.publish(msg);  </span><br><span class="line">            //cv::Wait(1);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="my-subscriber"><a href="#my-subscriber" class="headerlink" title="my_subscriber"></a>my_subscriber</h2><p>该节点则是将订阅到的图像消息进行图像处理，即二维码识别。<br>在识别到二维码后，将解析出来的信息以消息的形式发布到话题”GetCtrl_msg”上。<br>其中，wait这个变量是为了在识别过后等待一段时间在识别下一个二维码。</p><p>程序2.1 加载ROS，OpenCV，Zbar的头文件和命名空间<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;ros/ros.h&gt;  </span><br><span class="line">#include &quot;std_msgs/String.h&quot;</span><br><span class="line"></span><br><span class="line">#include &quot;iostream&quot;</span><br><span class="line">#include &quot;string.h&quot;</span><br><span class="line">#include &quot;fstream&quot;</span><br><span class="line">#include &quot;signal.h&quot;</span><br><span class="line">#include &lt;termios.h&gt;</span><br><span class="line">#include &lt;math.h&gt;</span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">#include &lt;sys/poll.h&gt;</span><br><span class="line">#include &lt;boost/thread/thread.hpp&gt;</span><br><span class="line"></span><br><span class="line">#include &quot;opencv2/core/core.hpp&quot; </span><br><span class="line">#include &quot;opencv2/highgui/highgui.hpp&quot; </span><br><span class="line">#include &quot;opencv2/imgproc/imgproc.hpp&quot; </span><br><span class="line">#include &lt;opencv2/opencv.hpp&gt;</span><br><span class="line"></span><br><span class="line">#include &lt;image_transport/image_transport.h&gt;  </span><br><span class="line">#include &lt;cv_bridge/cv_bridge.h&gt;  </span><br><span class="line">#include &lt;zbar.h&gt;</span><br><span class="line">#define oo 1e9+7</span><br><span class="line">using namespace std;</span><br><span class="line">using namespace zbar;  //添加zbar名称空间      </span><br><span class="line">using namespace cv;</span><br></pre></td></tr></table></figure></p><p>程序 2.2 初始化节点，窗口，并注册发布和订阅的话题<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ros::init(argc, argv, &quot;image_listener&quot;);  </span><br><span class="line">ros::NodeHandle nh;  </span><br><span class="line">cv::namedWindow(&quot;Source Image&quot;);  </span><br><span class="line">//开始窗口线程</span><br><span class="line">cv::startWindowThread();  </span><br><span class="line">image_transport::ImageTransport it(nh);  </span><br><span class="line">signal(SIGINT, MySigintHandler);</span><br><span class="line">ros::Publisher pub=nh.advertise&lt;std_msgs::String&gt;(&quot;GetCtrl_msg&quot;,1000);</span><br><span class="line">image_transport::Subscriber sub = it.subscribe(&quot;camera/image&quot;, 1,boost::bind(&amp;imageCallback,_1,boost::ref(pub)));</span><br></pre></td></tr></table></figure></p><p>程序2.3 订阅到图像消息后回调函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">void imageCallback(const sensor_msgs::ImageConstPtr&amp; msg,ros::Publisher pub)  </span><br><span class="line">&#123;  </span><br><span class="line">    try  </span><br><span class="line">    &#123;  </span><br><span class="line">Mat image=cv_bridge::toCvShare(msg, &quot;bgr8&quot;)-&gt;image;</span><br><span class="line">imshow(&quot;Source Image&quot;, image);</span><br><span class="line">if(wait==100)&#123;</span><br><span class="line">wait=-1;</span><br><span class="line">ROS_INFO(&quot; Continue to identify &quot;);</span><br><span class="line">&#125; </span><br><span class="line">else if(wait!=-1)&#123;</span><br><span class="line">wait++;</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line">cvtColor(image, image, CV_RGB2GRAY);</span><br><span class="line"></span><br><span class="line">if(Scan(image,pub))&#123;</span><br><span class="line">wait=0;</span><br><span class="line">&#125;</span><br><span class="line">        //waitKey(30);  </span><br><span class="line">    &#125;  </span><br><span class="line">    catch (cv_bridge::Exception&amp; e)  //异常处理</span><br><span class="line">    &#123;  </span><br><span class="line">        ROS_ERROR(&quot;Could not convert from &apos;%s&apos; to &apos;bgr8&apos;.&quot;, msg-&gt;encoding.c_str());  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>程序2.4 使用Zbar库识别二维码并发布解析出来的消息<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">bool Scan(Mat image,ros::Publisher pub)&#123;</span><br><span class="line">//zbar类，定义扫描器</span><br><span class="line">ImageScanner scanner;</span><br><span class="line">//配置参数，初始化</span><br><span class="line">scanner.set_config(ZBAR_NONE, ZBAR_CFG_ENABLE, 1);</span><br><span class="line"></span><br><span class="line">int width = image.cols;</span><br><span class="line">int height = image.rows;</span><br><span class="line">uchar *raw = (uchar *)image.data;</span><br><span class="line">//封装图像数据 Y800单色图像格式</span><br><span class="line">Image imageZbar(width, height, &quot;Y800&quot;, raw, width * height);</span><br><span class="line"></span><br><span class="line">//扫描条码或者二维码</span><br><span class="line">scanner.scan(imageZbar);</span><br><span class="line"></span><br><span class="line">for (Image::SymbolIterator symbol = imageZbar.symbol_begin(); symbol != imageZbar.symbol_end(); ++symbol)</span><br><span class="line">&#123;</span><br><span class="line">cout &lt;&lt; &quot;类型：&quot; &lt;&lt; endl &lt;&lt; symbol-&gt;get_type_name() &lt;&lt; endl &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; &quot;二维码：&quot; &lt;&lt; endl &lt;&lt; symbol-&gt;get_data() &lt;&lt; endl &lt;&lt; endl;</span><br><span class="line">    //发布消息到话题“GetCtrl_msg”上</span><br><span class="line">std_msgs::String msg;</span><br><span class="line">msg.data=symbol-&gt;get_data();</span><br><span class="line">pub.publish(msg);</span><br><span class="line">imageZbar.set_data(NULL, 0);</span><br><span class="line">return 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//清除缓存</span><br><span class="line">imageZbar.set_data(NULL, 0);</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h2 id="DobotClient-PTP"><a href="#DobotClient-PTP" class="headerlink" title="DobotClient_PTP"></a>DobotClient_PTP</h2><p>该节点是订阅话题”GetCtrl_msg”上的指令消息，并做出相应的行为。<br>程序3.1 初始化节点<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ros::init(argc, argv, &quot;DobotClient&quot;);</span><br><span class="line">ros::NodeHandle n;</span><br></pre></td></tr></table></figure></p><p>程序3.2 注册订阅器<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ros::Subscriber sub = n.subscribe&lt;std_msgs::String&gt;(&quot;GetCtrl_msg&quot;, 1000,messageCallback);</span><br></pre></td></tr></table></figure></p><p>程序3.3 回调函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">void messageCallback(const std_msgs::String::ConstPtr &amp;msg)&#123;</span><br><span class="line">std::string cmd=msg-&gt;data.c_str();</span><br><span class="line">if(cmd==&quot;0&quot;)DobotHome();</span><br><span class="line">else if(cmd==&quot;1&quot;)Action();</span><br><span class="line">else if(cmd==&quot;2&quot;)getPoint();</span><br><span class="line">else if(cmd==&quot;3&quot;)Point.clear();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>以上DobotHome(),Action(),getPoint()函数中就是通过服务请求的方式向 DobotServer节点请求相应的服务，此处并未展现。</p><h1 id="结果测试"><a href="#结果测试" class="headerlink" title="结果测试"></a>结果测试</h1><p>启动ros master<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ roscore</span><br></pre></td></tr></table></figure></p><p>打开新终端，运行DobotServer<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ rosrun dobot DobotServer</span><br></pre></td></tr></table></figure></p><p>打开新终端，启动launch文件，可同时打开qrcode功能包中的my_subscriber和my_publisher节点，dobot功能包中的DobotClient_PTP和DobotClient_GetInfor。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ roslaunch qrcode camera.launch</span><br></pre></td></tr></table></figure></p><p>启动文件成功运行后，将含有指令信息的二维码对准摄像头，控制机械臂运动。<br>0 回零 1 执行 2 记录点位 3 清空点位<br>通过按下机械臂上的解锁按钮，手动移动机械臂。当松开按钮时，机械臂将自动记录末端点位。<br>以上操作也可以通过键盘来操控机械臂运动，按下0～3相应的按键可操作。按Ctrl+C可终止启动文件。<br><img src="识别二维码成功.png" alt="识别二维码成功"></p><h1 id="不足之处"><a href="#不足之处" class="headerlink" title="不足之处"></a>不足之处</h1><ol><li>实现的功能过少</li><li>有时候会一下子识别好几次二维码，原因不明。</li><li>其实很多节点都可以合并成一处。不过分到不同节点上去也可以使人对于节点间的通讯更加了解。</li></ol><h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>这个项目可以说是把我这一个月来所学的东西都揉在一块，ROS、OpenCV、Zbar……作为我本次实习出来的结果也算是令人满意。<br>原本作为一个大一刚刚结束的学生，其实根本没想过自己实习的时候能做些什么，毕竟一开始什么也不会，ROS,OpenCV这些也只不过是听过而已。但是经过三个周的自我探索，对这些东西也有了一个初步的了解，对于脑中时不时浮现的奇思妙想也有更加具体的构思，而并非以前那样的天马行空，形而上学。</p><p>大一实习生到底能做些什么呢？<strong>我觉得什么都做不了，但什么都能做</strong>。</p><p>毕竟大一接触的专业知识并不多，大多还只是通识教育。若是在实习初期就告诉我要做个balabala玩意我估计会一脸懵逼，不知所云。<br>但是我不会毫无办法，甚至逃避现实。因为我深知工作中所运用的大部分知识都根本没有必要非得在学校里学习，这些只是完全是可以通过自学来掌握的。没有学过的东西，只要不是必须需要非常高深的理论知识，我们完全可以现学现用。像是ROS和OpenCV这类东西，学校里一般是不会教学生的，基本上需要学生自学掌握。<br>在做项目的过程中也不一定非要完全掌握了某样东西才能去做。学海无涯，bug不止，哪有人能百分百的精通一个技能。人总会遇到自己无法解决的问题，这个时候只要百度，谷歌一下，总能找到解决方法。</p><p><strong>重要的，是耐下心来，脚踏实地，慢慢探索。</strong></p><p>我其实很感谢我高中学习竞赛的那段经历。<br>虽然我并没有获得完美的收场，但是我的确收获了很多。<br>编程的入门，算法的理解，搜索的方法，以及……自学的觉悟。<br>因为在看题解的时候，我常常会遇到一些我没有学过的，老师也没讲过（虽然老师很少讲东西）的新算法或者数据结构。一开始，我大惊小怪，感到很坑，怀着这玩意是高级货的心态去学习，弄得自己好像是刚出新手村就碰见四大天王的勇者。然而后来这种事情经历的多了，也就习以为常了，碰到不懂的东西？莽就完事了。对我而言，很少有东西是自学学不会的（动手操作除外），只要肯投入实践，到处查资料，自己折腾一番，最后总能搞出个所以然来。</p><p>此文到此结束，感谢观看。</p>]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
      <category term="计算机" scheme="http://kxjzxc.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
      <category term="程序" scheme="http://kxjzxc.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E7%A8%8B%E5%BA%8F/"/>
    
      <category term="OpenCv" scheme="http://kxjzxc.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E7%A8%8B%E5%BA%8F/OpenCv/"/>
    
    
      <category term="ROS" scheme="http://kxjzxc.github.io/tags/ROS/"/>
    
      <category term="OpenCv" scheme="http://kxjzxc.github.io/tags/OpenCv/"/>
    
  </entry>
  
  <entry>
    <title>关于我重装ubuntu系统后所做的那些事</title>
    <link href="http://kxjzxc.github.io/%E5%85%B3%E4%BA%8E%E6%88%91%E9%87%8D%E8%A3%85ubuntu%E7%B3%BB%E7%BB%9F%E5%90%8E%E6%89%80%E5%81%9A%E7%9A%84%E9%82%A3%E4%BA%9B%E4%BA%8B.html"/>
    <id>http://kxjzxc.github.io/关于我重装ubuntu系统后所做的那些事.html</id>
    <published>2019-08-07T03:52:18.000Z</published>
    <updated>2019-10-27T13:50:54.678Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script>    <div id="aplayer-aojILvis" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="503619284" data-server="netease" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#555"></div><h1 id="前言（直接略过）"><a href="#前言（直接略过）" class="headerlink" title="前言（直接略过）"></a>前言（直接略过）</h1><p>上周五，我搞完基础的ros，准备进军OpenCv了解了解图像处理。然而没意识到装ROS全桌面版时OpenCv早已跑到我电脑里的我傻乎乎地打算再装一个OpenCv。于是在漫长且无趣的安装途中，我一时心血来潮，查看了自己的python版本——2.7，于是果断打算升级一波。且不说我不知道系统本来就自带两个版本的python，等我心满意足地升级完后，意外地发现自家终端打不开了。这就是此次事故的万恶之源。<br>根据网上提供的方法，我进入tty3，输入<code>gnome-terminal</code>，回车，发现是什么<code>no module named &#39;gi&#39;</code>。我百度几下，再各种死马当活马医的折腾，却完全不见效果。最终恼羞成怒的我，决定莽过去，极其无脑地删掉了整个python3文件夹，于是乎，系统崩溃。而后随抢救回来，但是也不过是回到原点，而且输入法也消失了。</p><p>无计可施的我打算重装了。<br>但是完全没有经验的我打算先卸载移动硬盘里的ubuntu（我装在移动硬盘里），先搞grub引导。于是下载FreeBSD就是一通乱搞。<br>好了，我把win7也搞炸了。<br>win7上不去？那就只能暴力重装喽。但现在只有ubuntu是可以制作启动盘喽，于是又回到ubuntu制作win7的启动盘。结果最后有败在了引导上，连ubuntu都装不上去了。<br>好的，那么现在两个系统都白给了。浪费了整整一天的我求助了同学，最终意外的用PE修复了win7的引导，可喜可贺。（PE真是个好东西）</p><p>事到如今，我也改变了想法，将两个系统都装在电脑硬盘上，文件数据都放在移动硬盘上。如此一来我也不必费劲去卸载原先的ubuntu了。<br>怀着这等策略，我迎来了安装ubuntu的第二天，然而很快就迎来了第一个坑——启动盘无法启动我的电脑。<br>我的启动盘是用sd卡+读卡器制成的，理论上和U盘没什么区别，而我的电脑就是无法在开机时识别到此启动盘。确定一遍bios，没错。在别人电脑上试试，识别成功。用UltraISO制作，还是不行。就这样荒废了整个白天，我也没查出个所以然来。最终将原因归结为电脑型号太旧无法识别读卡器后，向同学借了个U盘，制成启动盘，成功启动。</p><h1 id="安装与配置"><a href="#安装与配置" class="headerlink" title="安装与配置"></a>安装与配置</h1><h2 id="默认安装"><a href="#默认安装" class="headerlink" title="默认安装"></a>默认安装</h2><p>安装ubuntu的过程倒是简单到令人感动。唯一值得说的，大概就是分区的设置了吧。<br>我设置了四个分区<br>引导分区 ext4 主分区 挂载到/boot 200MB<br>根目录 ext4 主分区 挂载到/ 10240MB（10G，但是后来我觉得太少，因为如果你不把/usr单独分出来，软件默认装在这里。相当于win的C盘）<br>交换区域 swaparea 逻辑分区 2048MB（2G）<br>主目录 ext4 逻辑分区 挂载到/home 剩下空间（其实这个可以不单独从根目录里分出来，相当于文档盘）</p><p>本次我选择的是最小化安装，所以系统里最初就只有firefox，gedit，Teriminal以及一些系统工具等基本配置。<br>重新安装了Ubuntu，那么一切都得重新配置，接下来就让我谈谈我都在Ubuntu上做了什么吧。</p><h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="语言设置"><a href="#语言设置" class="headerlink" title="语言设置"></a>语言设置</h3><p>由于上次将系统设置成中文后，tty模式经常会乱码。这着实让我感到非常不爽，所以这次我索性将系统设置成英文，等习惯了说不定还能学好英文呢（笑）。<br>至于输入法，拼音绝对是必不可少的。无论是写博客，还是查资料，我都必须用中文。<br>这次我依旧选择的是ibus输入法。<br>首先安装拼音输入。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install ibus-pinyin</span><br></pre></td></tr></table></figure></p><p>然后打开设置选择Region&amp;Language，点击‘Manage Installed Languages’，在Install/Remove Languages中选择Chinese(simplified)，选择apply。<br>回到Region&amp;Language，在Input Source中点击加号，单击Chinese，选择Chinese(Pinyin)，设置完成。</p><h3 id="hexo-git"><a href="#hexo-git" class="headerlink" title="hexo+git"></a>hexo+git</h3><p>我用ubuntu的一大功能就是写blog，所以博客的环境必不可少。<br>由于之前写过<a href="https://kxjzxc.github.io/关于在linux环境下搭建博客这件事.html">教程</a>，所以这里就不再赘述了。</p><h3 id="百度网盘"><a href="#百度网盘" class="headerlink" title="百度网盘"></a>百度网盘</h3><p>重装系统前，我都是使用Aria2来下载百度网盘文件的。后来终端不能用了，又要下载win7镜像文件，所以就下载了百度网盘linux版本，却意外发现也许大概应该可能没有限速？所以索性这次就直接下载百度网盘的linux版，反正aria2也不快，而且还麻烦。<br>方法嘛，直接去官网下载压缩包喽。</p><h3 id="WPS-Office"><a href="#WPS-Office" class="headerlink" title="WPS-Office"></a>WPS-Office</h3><p>为了看word文档和ppt，就必须要有Office。这次因为是最小化安装，所以系统也就没装LibreOffice，而且我也不太喜欢用这玩意，打开个文件都要半天。<br>所以我去下载了WPS。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget http://kdl.cc.ksosoft.com/wps-community/download/6634/wps-office_10.1.0.6634_amd64.deb</span><br><span class="line">sudo dpkg -i wps-office_10.1.0.6634_amd64.deb</span><br></pre></td></tr></table></figure></p><p>第二条命令需要进入安装包所在目录</p><h3 id="ROS"><a href="#ROS" class="headerlink" title="ROS"></a>ROS</h3><p>ROS有需要就装，方法也不在这里赘述了，自己去官网找呗。</p><h3 id="音乐播放器"><a href="#音乐播放器" class="headerlink" title="音乐播放器"></a>音乐播放器</h3><p>到写这篇博文前，我才惊觉自己没有安装音乐播放器。Gnome桌面套件自带的Rhythmbox我是不打算用了，倒也不是有什么地方不好，只是想换换。虽然网易云也有Linux版，但最终我还是选择比较符合Ubuntu气质的播放器（其实我也不知道啥是Ubuntu气质）。于是在一众神奇的播放器中，我相中了被称为Ubuntu界的千千静音的Audacious。至于用法，我暂且不会，将来用习惯了，用会了，或许会提一下。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install audacious</span><br><span class="line">sudo apt-get install audacious-plugins</span><br></pre></td></tr></table></figure></p><p>第二条命令是安装解码器。</p><h1 id="遇到的坑"><a href="#遇到的坑" class="headerlink" title="遇到的坑"></a>遇到的坑</h1><h2 id="第一坑-空间"><a href="#第一坑-空间" class="headerlink" title="第一坑-空间"></a>第一坑-空间</h2><p>前文讲分区的时候说了，感觉给根目录的分区太小，因为软件基本上是装在这上面的。我后来装了个ROS后，就只剩下几百MB了<br>这时摆在我面前的有两种做法<br>第一，压缩/home分区，划给根目录，也就是直接切割磁盘。为此我下载了Gparted，然而那似乎只能操作非当前系统。所以我得去win7上操作。但是这终究只是我的猜想，而且这几天的经历也给我留下心理阴影，不敢再对磁盘动手。<br>第二，将/usr目录和/opt目录移到/home目录下。<br>这是我上网找到的方法，还不错。</p><ol><li>尽量的关掉不用的程序</li><li><p>复制</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd / ; sudo tar cf - usr opt | (cd /home ; sudo tar xfv - )</span><br></pre></td></tr></table></figure></li><li><p>编辑fstab</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/fstab</span><br></pre></td></tr></table></figure><p> 没有vim用gedit。<br> 在带/usr 和/opt的行(如果有的话)最前面加上#号<br> 然后在紧接着 /home 的那行加上。</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/home/usr  /usr   none    bind    0       0</span><br><span class="line">/home/opt  /opt   none    bind    0       0</span><br></pre></td></tr></table></figure></li><li><p>保存并重启</p></li></ol><p>方法有效。<br>但是我后来想删掉根目录下的/usr时，系统又双叒叕崩溃了。<br>原因不明，方法无效，准备重装。<br>好吧，实际上这次我用启动盘启动后，没有选择install ubuntu，而是try ubuntu<br>于是我进入了在ubuntu系统后，检查了两个目录下的/usr目录，发现主目录下有缺失，于是用<code>sudo cp -r 源文件路径 要复制到的文件夹路径</code>将/usr有复制了一遍后，成功重启。<br>但是我不打算再碰根目录了。</p><h1 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h1><p>经过这三天看似毫无意义的折腾后，我对系统修复和安装以及ubuntu的结构都上升了一个台阶，也算是不幸中的万幸。<br>这篇博文我打算时时更新，将我认为必要的软件和操作写到此处，以便以后重装系统时，能知道做什么。</p>]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
      <category term="教程" scheme="http://kxjzxc.github.io/categories/%E6%95%99%E7%A8%8B/"/>
    
    
      <category term="Linux" scheme="http://kxjzxc.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>ROS第一坑之基本操作</title>
    <link href="http://kxjzxc.github.io/ROS%E7%AC%AC%E4%B8%80%E5%9D%91%E4%B9%8B%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C.html"/>
    <id>http://kxjzxc.github.io/ROS第一坑之基本操作.html</id>
    <published>2019-08-01T08:50:36.000Z</published>
    <updated>2019-08-02T03:58:20.919Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>作为自动化专业的学生，机器人操作系统ROS的大名如雷贯耳。</p><blockquote><p>ROS 是一个适用于机器人的开源的元操作系统。它提供了操作系统应有的服务，包括硬件抽象，底层设备控制，常用函数的实现，进程间消息传递，以及包管理。它也提供用于获取、编译、编写、和跨计算机运行代码所需的工具和库函数。在某些方面ROS相当于一种“机器人框架（robot frameworks）”——ROS Wiki</p></blockquote><p>早在今年年初，我与同学一起参观华强北的优艾智合公司的时候，为我们介绍公司的人（似乎是我们的师兄）就向刚结束大一上学期，尚不明所以的我们介绍了机器人学习之路，其中就提到了非常重要的ROS。虽然当时ROS在我心目中留下了深刻的印象，但是我并没有时间也没有机会去学习。</p><p>直到小学期，我深感自己在本专业的自我学习上完全不够，所以一时心血来潮安装了ROS，可惜知道小学期结束，我连打开都未曾打开过。<br>所幸暑期在越疆实习的时候，可以使用ROS操纵他们的机械臂。因而我便趁此机会借用公司的机械臂和其官网上的demo开始真正接触ROS。</p><p>然而我并不想写关于ROS的教程，该方面的书籍资料已经够多了，即使那些资料并非十分完美，但至少会比我自己写的要有用的多。所以在这篇文章中我也只想谈一谈我在学习ROS初级教程中所遇到的坑。</p><p><a href="http://wiki.ros.org/cn" target="_blank" rel="noopener">ROS Wiki中文 从安装到入门</a></p><h4 id="ROS-INFO不输出"><a href="#ROS-INFO不输出" class="headerlink" title="ROS_INFO不输出"></a>ROS_INFO不输出</h4><p>我从越疆官网上下载下来的demo是将所有的程序都写在一个main函数中，这使得稍微有点强迫症的我手动将main函数里的程序封装在不同的函数中。然而作为一个懵懂无知的新手，我的“莽撞”行为导致我在后期调试的时候,在跳出第一个调用的函数后，ROS_INFO都输出不了。我上网搜索原因，可似乎没有人遇到与我相同的问题，所以就暂且搁置。后来我一句一句的测试，发现我将第一个句柄的创建写在main函数中的这个函数调用前问题就解决了。<br>原因目前暂且不明，但是当我后来知道ROS节点是在第一个句柄被创建后才开始的，我就怀疑应该是这个原因了。<br>无论如何以后的ROS程序，句柄一定要写在初始化语句的后面。<br>当然，如果我们也可以选择使用ros::start()和ros::shutdown来启动和关闭节点。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">int main(int argc, char **argv)</span><br><span class="line">&#123;</span><br><span class="line">ros::init(argc, argv, &quot;Quit&quot;);//初始化节点</span><br><span class="line">ros::NodeHandle n;//创建句柄,节点开始</span><br><span class="line">return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="消息与服务"><a href="#消息与服务" class="headerlink" title="消息与服务"></a>消息与服务</h4><p>关于消息与服务的理解，srv文件与msg文件的创建，订阅器与发布器的编写，服务端和客户端的编写在官网上都写得非常清楚，这里我也就不再赘述。<br>服务端和客户端的编写我倒是没遇到什么大的问题，毕竟demo中有此两者的源代码。遇到问题也不过是我没有按照流程一步一步来。<br>但对于消息的订阅器与发布器编写我倒是经常遇到的坑，虽然大多由于我理解有误。</p><ol><li><p>订阅器与发布器的注册<br>编写订阅器和发布器的时候首先要向节点管理器（ros Master）进行注册，这是毋庸置疑的。但是要值得注意的是，要在main函数中启动节点后就注册，尤其是发布器，不能够在单独的函数中进行注册，要不然会无法发布消息。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ros::Publisher pub=n.advertise&lt;dobot::GetCtrl_msg&gt;(<span class="string">"GetCtrl_msg"</span>,<span class="number">1000</span>);<span class="comment">//注册发布器</span></span><br><span class="line">ros::Subscriber sub = n.subscribe&lt;dobot::GetCtrl_msg&gt;(<span class="string">"GetCtrl_msg"</span>, <span class="number">1000</span>,messageCallback);<span class="comment">//注册订阅器</span></span><br></pre></td></tr></table></figure></li><li><p>ros::spin()与ros::spinOnce()<br>对于这两个函数的详解，网上资料也有很多，像是<a href="https://www.cnblogs.com/liu-fa/p/5925381.html" target="_blank" rel="noopener">这个博客</a><br>简而言之，就是在你订阅消息的时候，只有遇到这两条语句的时候才会调用回调函数。<br>使用ros::spin()会进入自循环，也就是不断的调用自己，以使一接收到消息就进入回调函数。使用此语句，该语句下面的程序都不会再被执行。<br>而ros::spinOnce()只会调用一次回调函数，可以实现接下来的程序。</p></li><li><p>消息的发布订阅机制<br>消息会发布到注册的话题上，然后订阅器实时的订阅话题上的消息。这就等同于一个节点实时接受另一个节点的指令，而并非信息的传递，订阅器是无法接受之前发布的消息的。<br>举个例子：<br>我之前想让一个节点记录我机械臂末端的坐标，并发布到话题上。然后我开启另一个节点，先接受话题上的坐标信息，在执行操作。<br>然而实际上这么做是不可行的，当我开启另一个节点的时候，之前发布到话题上的消息已经过期了，新节点是无法订阅到坐标消息的。<br>所以后来我转变了思路，由第一个节点发布指令消息，第二个节点根据接受到的指令消息作出相应的操作，这样一来第二个节点就可以一接收到第一个节点发布的消息就执行操作或者记录节点。执行完后继续等待指令消息。</p></li></ol><h4 id="回调函数传递多个参数"><a href="#回调函数传递多个参数" class="headerlink" title="回调函数传递多个参数"></a>回调函数传递多个参数</h4><p>在ROS的节点程序中，经常会使用到许多回调函数，像是订阅到消息    的时候会自己调用回调函数。但这种时候传递到回调函数里的参数是固定的，所以我们需要使用boost::bind函数来使我们可以自由的传递参数。</p><blockquote><p>boost::bind是标准库函数std::bind1st和std::bind2nd的一种泛化形式。其可以支持函数对象、函数、函数指针、成员函数指针，并且绑定任意参数到某个指定值上或者将输入参数传入任意位置。</p></blockquote><p>boost::bind(f,1,2) –&gt; f(1,2)<br>boost::bind(f,_1,1) –&gt; f(x,1)<br><a href="https://www.cnblogs.com/benxintuzi/p/4862129.html" target="_blank" rel="noopener">具体用法参见此博客</a></p><p>此处举两个例子</p><ol><li>订阅消息<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ros::Subscriber sub = n.subscribe&lt;dobot::GetCtrl_msg&gt;(<span class="string">"GetCtrl_msg"</span>, <span class="number">1000</span>,messageCallback);<span class="comment">//单参数</span></span><br><span class="line">ros::Subscriber sub = n.subscribe&lt;dobot::GetCtrl_msg&gt;(<span class="string">"GetCtrl_msg"</span>, <span class="number">1000</span>,boost::bind(&amp;messageCallback,\_1,point);多参数</span><br></pre></td></tr></table></figure></li></ol><p>其中_1是占位符，代表回调函数中原先的参数<code>const dobot::GetCtrl_msg::ConstPtr &amp;msg</code>。</p><ol start="2"><li>多线程<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">boost::<span class="function">thread <span class="title">t</span><span class="params">(keboard)</span></span>;<span class="comment">//单参数</span></span><br><span class="line">boost::<span class="function">thread <span class="title">t1</span><span class="params">(boost::bind(&amp;keyboard,boost::ref(pub)))</span></span>;<span class="comment">//多参数</span></span><br></pre></td></tr></table></figure></li></ol><p>其中boost::ref(x)是向回调函数传递一个变量</p><h4 id="退出节点"><a href="#退出节点" class="headerlink" title="退出节点"></a>退出节点</h4><p>在未使用launch文件启动的情况下，每一个节点都是一个终端，所以通常只要按Ctrl+C即可取消命令，程序会调用ros::shutdown()来关闭节点。<br>但是有时候我们会需要在退出节点的时候进行一些处理，例如需要清空指令队列使机器人停下或者传递消息之类的。这时候我们就需要signal函数来覆盖原先的Ctrl+C，使得当用户按下Ctrl+C的时候，会调用相应的回调函数，作最后的处理。<br><a href="https://www.jianshu.com/p/7fb777e588a9" target="_blank" rel="noopener">这里是对信号处理函数的比较好的介绍</a><br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"ros/ros.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"signal.h"</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MySigintHandler</span><span class="params">(<span class="keyword">int</span> sig)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="comment">//这里主要进行退出前的数据保存、内存清理、告知其他节点等工作</span></span><br><span class="line">ROS_INFO(<span class="string">"shutting down!"</span>);</span><br><span class="line">    <span class="comment">/*自己封装的函数</span></span><br><span class="line"><span class="comment">    StopQueueCmd();</span></span><br><span class="line"><span class="comment">ClearQueueCmd();</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">ros::shutdown();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> **argv)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">ros::init(argc, argv, <span class="string">"Quit"</span>);<span class="comment">//初始化</span></span><br><span class="line">ros::NodeHandle n;<span class="comment">//创建句柄</span></span><br><span class="line">signal(SIGINT, MySigintHandler);<span class="comment">//第一个参数是指Ctrl+C的指令，第二个参数是调用的函数</span></span><br><span class="line">ros::spinOnce();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><p>其实还有好多的东西没有写，像是我封装函数到服务端，launch文件启动，用键盘键入字符，多线程等，只是这些大多是基础教程或是与ros关系不大的知识，所以也就没写出来。<br>这几天用ros实现我所想要的功能时，也的的确确学到了不少东西，至少ros的初级用法都已明晰。虽然还有许多有待提升的地方，像是暂停功能、紧急停止功能、用栈优化指令队列之类的，不过意义不大，也就没有继续写下去了。</p>]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
      <category term="ROS" scheme="http://kxjzxc.github.io/categories/ROS/"/>
    
    
      <category term="ROS" scheme="http://kxjzxc.github.io/tags/ROS/"/>
    
  </entry>
  
  <entry>
    <title>基于C语言与EGE图形库的模拟地铁自动售票系统</title>
    <link href="http://kxjzxc.github.io/%E5%9F%BA%E4%BA%8EC%E8%AF%AD%E8%A8%80%E4%B8%8EEGE%E5%9B%BE%E5%BD%A2%E5%BA%93%E7%9A%84%E6%A8%A1%E6%8B%9F%E5%9C%B0%E9%93%81%E8%87%AA%E5%8A%A8%E5%94%AE%E7%A5%A8%E7%B3%BB%E7%BB%9F.html"/>
    <id>http://kxjzxc.github.io/基于C语言与EGE图形库的模拟地铁自动售票系统.html</id>
    <published>2019-07-08T19:04:35.000Z</published>
    <updated>2019-07-10T01:41:02.360Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>众所周知，期末考试周结束后，迎来的不是荒淫放荡的暑假生活，而是依旧忙碌的小学期。<br>小学期的第一周，全是高级语言设计课。说是上课，其实除了第一天讲了一天的软件工程之外，剩下四天全都是搬着笔记本待在教室里敲代码。为了提供笔记本的电源，助教还得向物业借许多排插。不是很明白为什么非得在教室敲，只要作业完成了在哪里其实都一样吧。<br>题目有两个，我的题目是模拟地铁自动售票系统，另一个是职工档案管理系统。第二个有点像是大一上C语言实验课做的学生成绩管理系统，不过要比那个多很多功能。两个题目都需要做用户交互界面。<br>我选到第一个还是比较幸运的，因为第一个核心代码并不是特别的多，主要程序还是在界面设计上，至少对我来说是这样的。而第二个题目之前也做过类似的，感觉并不能学到什么比较新的东西。<br>这一周感觉大部分时间都在各种乱七八糟的事情上折腾，像是安装图形库，配置sublime，设计交互界面之类的，作业一拖再拖，直到第一周周日才做好。第二周又马上要开始认知实习课程，前四天一天到晚就要往外跑，参观各种企业。加上社团的项目，robomaster的选拔培训，之类的，实验报告到周四才完成。到周五认知实习答辩结束，原以为可以休息一阵子，谁想突然又说这门课也要答辩，报告也需要修改。周末写了几篇博文，再把PPT做好，就过去了。报告是懒得改了……原先是这么想的，结果呢，终究还是逃不过去，答辩结束后还是要修改。好在这次比起之前要求修改多了一些要求，好下手。<br>说真的，每每想到这门课只有一个学分，而且还不是考察课，我总有一种随便做做就算了的想法。这一而再再而三的要求也着实令人厌烦，只想快点结束。若不是真的学到了一些东西，我必定不会写这篇博文。时到如今，多说也无益了。</p><h2 id="任务概述"><a href="#任务概述" class="headerlink" title="任务概述"></a>任务概述</h2><p>设计一个具有购买车票、地图查询、系统说明、退出等功能的模拟地铁自动售票的系统。<br>系统要求具有欢迎界面，界面显示作者信息和版权信息。进入系统主菜单后提供购票选项、地图查询选项、系统说明、退出系统四个选项。<br>系统说明界面详细的介绍了购票流程，并且附有用户须知。<br>购票系统实现通过键盘输入起止站和票价，并且以此计算阶梯票价。根据系统提示进入投币找币流程，购票成功后返回欢迎界面。<br>查询系统通过输入站台编号查询站台信息。查询成功后可选择继续查询、购票或是返回。</p><h2 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h2><p>操作系统：Windows7<br>开发环境：codeblocks+EGE图形库</p><h2 id="系统设计"><a href="#系统设计" class="headerlink" title="系统设计"></a>系统设计</h2><h3 id="总体架构设计"><a href="#总体架构设计" class="headerlink" title="总体架构设计"></a>总体架构设计</h3><p>整个系统分为地图查询系统和购买车票系统。<br>由于代码比较多，我将其分写到mian.cpp、map.cpp、data.cpp、sold.cpp、Welcome.cpp、Index.cpp、description.cpp共七个cpp文件中。然后新建了一个名为”kxj.h”的头文件，在里面声明多个文件共用的函数，结构体以及外部变量。<br>其中每个文件的作用如下：<br>Welcome.cpp：绘制欢迎界面。<br>Index.cpp：绘制系统主菜单界面。<br>description.cpp：绘制系统说明界面。<br>data.cpp：地铁信息初始化。<br>Map.cpp：绘制地图查询界面，以及实现查询地图的功能。<br>Sold.cpp：绘制购买车票界面，以及实现输入起止站和车票数与投币功能。<br>Main.cpp：调用各个功能以及界面，并提供主界面的按钮点击功能。</p><h3 id="模块分析与设计"><a href="#模块分析与设计" class="headerlink" title="模块分析与设计"></a>模块分析与设计</h3><h4 id="头文件"><a href="#头文件" class="headerlink" title="头文件"></a>头文件</h4><ol><li><p>公用函数分析</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">DrawOpt</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> w,<span class="keyword">int</span> h,<span class="keyword">int</span> fnum,<span class="keyword">int</span> fh,<span class="keyword">char</span> optTitle[])</span></span>;<span class="comment">//绘制按钮键。</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Title</span><span class="params">()</span></span>;<span class="comment">//标题</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Copyright</span><span class="params">()</span></span>;<span class="comment">//版权信息，每一页的标配</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">checkClick</span><span class="params">(<span class="keyword">int</span> *x,<span class="keyword">int</span> *y)</span></span>;<span class="comment">//检测是否有点击，并且获取点击的位置</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Init</span><span class="params">()</span></span>;<span class="comment">//初始化页面，使之清空，并且有标题与版权信息</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">textBox</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> w,<span class="keyword">int</span> h,<span class="keyword">int</span> r)</span></span>;<span class="comment">//绘制输入框</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Input</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> n,<span class="keyword">int</span> fh,<span class="keyword">int</span> (*click)(<span class="keyword">int</span> x,<span class="keyword">int</span> y))</span></span>;<span class="comment">//在某输入框内输入。每次循环同时检测鼠标消息与键盘消息，确保键盘与鼠标都能够实现所需效果。</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Delete</span><span class="params">(<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> w,<span class="keyword">int</span> h)</span></span>;<span class="comment">//使某一矩形变成背景色，实现删除效果</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">checkIn</span><span class="params">(<span class="keyword">int</span> mx,<span class="keyword">int</span> my,<span class="keyword">int</span> x,<span class="keyword">int</span> y,<span class="keyword">int</span> w,<span class="keyword">int</span> h)</span></span>;<span class="comment">//检测点击位置是否在某处</span></span><br></pre></td></tr></table></figure></li><li><p>结构体STA是站台信息的存储类型，数组下标就是编号</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">STA</span>&#123;</span></span><br><span class="line"><span class="built_in">string</span> name;<span class="comment">//站点名称</span></span><br><span class="line"><span class="keyword">int</span> line;<span class="comment">//站点路线</span></span><br><span class="line"><span class="built_in">string</span> pre;<span class="comment">//上一站名称</span></span><br><span class="line"><span class="built_in">string</span> nxt;<span class="comment">//下一站名称</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li></ol><h4 id="地铁信息初始化"><a href="#地铁信息初始化" class="headerlink" title="地铁信息初始化"></a>地铁信息初始化</h4><p>通过循环将站台信息整合到结构体STA数组中，数组下标即为编号。换乘点拥有多个编号，不同线路上编号不同。<br>将八条线路图建成无向连通图。其中每一个编号视为一个点。一条线路上相邻两站之间连通，距离直接打表写入文件。换乘点不同编号之间距离为零。不连通的点之间距离为oo（1000000007）。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Query_same</span><span class="params">(<span class="keyword">int</span> x)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=number;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(station[i].name==station[x].name)mp[x][i]=<span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">data</span><span class="params">()</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;=<span class="number">7</span>;i++)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">0</span>;j&lt;sta_num[i];j++)&#123;</span><br><span class="line">number++;</span><br><span class="line">station[number]=(STA)&#123;sta_name[i][j],i+<span class="number">1</span>&#125;;</span><br><span class="line">station[number].pre=j?sta_name[i][<span class="number">0</span>]+<span class="string">"方向："</span>+sta_name[i][j<span class="number">-1</span>]:<span class="string">"此站为终点站"</span>;</span><br><span class="line">station[number].nxt=j&lt;sta_num[i]<span class="number">-1</span>?sta_name[i][sta_num[i]<span class="number">-1</span>]+<span class="string">"方向："</span>+sta_name[i][j+<span class="number">1</span>]:<span class="string">"此站为终点站"</span>;</span><br><span class="line"><span class="keyword">if</span>(j)mp[number][number<span class="number">-1</span>]=dismp[i][j<span class="number">-1</span>];</span><br><span class="line"><span class="keyword">if</span>(j&lt;sta_num[i]<span class="number">-1</span>)mp[number][number+<span class="number">1</span>]=dismp[i][j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=number;i++)&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=number;j++)&#123;</span><br><span class="line"><span class="keyword">if</span>(!mp[i][j])mp[i][j]=oo;</span><br><span class="line">&#125;</span><br><span class="line">Query_same(i);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="欢迎界面，系统主菜单以及系统说明界面"><a href="#欢迎界面，系统主菜单以及系统说明界面" class="headerlink" title="欢迎界面，系统主菜单以及系统说明界面"></a>欢迎界面，系统主菜单以及系统说明界面</h4><p>通过EGE图形库的库函数设计。<br><a hrel="http://xege.org/manual/index.htm">官方文档</a></p><h4 id="地图查询系统"><a href="#地图查询系统" class="headerlink" title="地图查询系统"></a>地图查询系统</h4><p>通过EGE图形库中的库函数完成交互界面。<br>查询站台时，先检测所查询编号是否合理，然后通过暴力查询，遍历每个站台，寻找所有站台名称相等的元素，加入到Line数组中，最后输出。<br>查询的代码如下：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">Query</span><span class="params">(<span class="keyword">int</span> num)</span></span>&#123;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;num&lt;=number&amp;&amp;i&lt;=number;i++)&#123;</span><br><span class="line"><span class="keyword">if</span>(station[num].name==station[i].name)&#123;</span><br><span class="line">Line[cnt++]=station[i];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">InitMap();</span><br><span class="line">setfont(<span class="number">20</span>,<span class="number">0</span>,<span class="string">"微软雅黑"</span>);</span><br><span class="line"><span class="keyword">if</span>(!cnt)outtextxy(WIDTH<span class="number">-200</span>,<span class="number">30</span>,<span class="string">"对不起，您查询的站点并不存在！"</span>);</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">char</span> * name=(<span class="keyword">char</span>*)(<span class="string">"站名："</span>+Line[<span class="number">0</span>].name).c_str();</span><br><span class="line">        outtextrect(WIDTH<span class="number">-200</span>,<span class="number">30</span>,<span class="number">100</span>,<span class="number">20</span>,name);</span><br><span class="line">        outtextxy(WIDTH<span class="number">-200</span>,<span class="number">60</span>,<span class="string">"所在线路："</span>);</span><br><span class="line">        <span class="keyword">while</span>(cnt--)&#123;</span><br><span class="line">            xyprintf(WIDTH<span class="number">-200</span>,<span class="number">90</span>+cnt*<span class="number">120</span>,<span class="string">"%d号线"</span>,Line[cnt].line);</span><br><span class="line">            xyprintf(WIDTH<span class="number">-200</span>,<span class="number">120</span>+cnt*<span class="number">120</span>,<span class="string">"下一站："</span>);</span><br><span class="line">            name=(<span class="keyword">char</span>*)Line[cnt].pre.data();</span><br><span class="line">            xyprintf(WIDTH<span class="number">-200</span>,<span class="number">150</span>+cnt*<span class="number">120</span>,name);</span><br><span class="line">            name=(<span class="keyword">char</span>*)Line[cnt].nxt.data();</span><br><span class="line">            xyprintf(WIDTH<span class="number">-200</span>,<span class="number">180</span>+cnt*<span class="number">120</span>,name);</span><br><span class="line">        &#125;</span><br><span class="line">        delay_fps(<span class="number">60</span>);</span><br><span class="line">        cnt=<span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="购买车票系统"><a href="#购买车票系统" class="headerlink" title="购买车票系统"></a>购买车票系统</h4><p>通过EGE库函数完成交互界面，实现输入功能。<br>计算阶梯票价时，先用无优化的最短路径dijstra算法计算出两者间的最短路径，然后将路径向上取整，根据规则计算出单价。<br>计算票价的代码如下：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">calcLine</span><span class="params">()</span></span>&#123;<span class="comment">//dijkstra计算最短路</span></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=number;i++)dis[i]=oo,mark[i]=<span class="number">0</span>;<span class="comment">//初始化</span></span><br><span class="line">dis[startStation]=<span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=number;i++)&#123;</span><br><span class="line"><span class="keyword">int</span> mi=oo,k=<span class="number">-1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=number;j++)&#123;</span><br><span class="line"><span class="keyword">if</span>(!mark[j]&amp;&amp;dis[j]&lt;mi)&#123;</span><br><span class="line">mi=dis[j];</span><br><span class="line">k=j;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">if</span>(k==<span class="number">-1</span>)<span class="keyword">return</span> ;</span><br><span class="line">mark[k]=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=number;j++)&#123;</span><br><span class="line"><span class="keyword">if</span>(!mark[j]&amp;&amp;dis[j]&gt;dis[k]+mp[k][j])&#123;</span><br><span class="line">dis[j]=dis[k]+mp[k][j];</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">price=calc(<span class="built_in">ceil</span>(dis[endStation]));<span class="comment">//calc是计算票价</span></span><br><span class="line"><span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="系统主菜单"><a href="#系统主菜单" class="headerlink" title="系统主菜单"></a>系统主菜单</h4><p>初始化窗口。<br>用EGE的库函数完成交互功能。点击“地图查询”“购买车票”“系统说明”直接调用相关函数。点击“退出系统”时则退出循环。<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">initgraph(WIDTH,HEIGHT);<span class="comment">//初始化窗口</span></span><br><span class="line">data();<span class="comment">//站点信息初始化</span></span><br><span class="line"><span class="comment">//欢迎界面，任意键继续</span></span><br><span class="line">    Welcome();</span><br><span class="line">    <span class="keyword">int</span> num=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> ( ; is_run(); delay_fps(<span class="number">60</span>))</span><br><span class="line">    <span class="comment">//while(1)</span></span><br><span class="line">    &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//系统说明界面，任意键继续</span></span><br><span class="line">        <span class="comment">//description();</span></span><br><span class="line">        <span class="comment">//显示主界面</span></span><br><span class="line">        Index();</span><br><span class="line">        delay_fps(<span class="number">60</span>);</span><br><span class="line">        <span class="keyword">int</span> x,y;</span><br><span class="line">        xyprintf(<span class="number">0</span>,<span class="number">0</span>,<span class="string">"%d"</span>,num++);</span><br><span class="line">        <span class="keyword">while</span>(!checkClick(&amp;x,&amp;y));<span class="comment">//getch();</span></span><br><span class="line">        <span class="keyword">if</span>(checkIn(x,y,(WIDTH<span class="number">-160</span>)/<span class="number">2</span>, <span class="number">100</span>, <span class="number">160</span>, <span class="number">50</span>))sold();<span class="comment">//购买车票</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(checkIn(x,y,(WIDTH<span class="number">-160</span>)/<span class="number">2</span>, <span class="number">180</span>, <span class="number">160</span>, <span class="number">50</span>))Map();<span class="comment">//查询地图</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(checkIn(x,y,(WIDTH<span class="number">-160</span>)/<span class="number">2</span>, <span class="number">260</span>, <span class="number">160</span>, <span class="number">50</span>))description();<span class="comment">//说明介绍</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(checkIn(x,y,(WIDTH<span class="number">-160</span>)/<span class="number">2</span>, <span class="number">340</span>, <span class="number">160</span>, <span class="number">50</span>))<span class="keyword">break</span>;<span class="comment">//退出系统</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">closegraph();</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h3 id="软件结构（流程图）"><a href="#软件结构（流程图）" class="headerlink" title="软件结构（流程图）"></a>软件结构（流程图）</h3><p><img src="流程图.png" alt></p><h2 id="调试过程"><a href="#调试过程" class="headerlink" title="调试过程"></a>调试过程</h2><p>我首先编写完系统的核心代码，如地图查询与购买车票。这一块没有遇到太大的问题。改正几处简单的错误之后，便通过了测试。<br>接下来我开始绘制图形界面。按钮、输入框、文字等只需要稍微计算一下便能够符合我的预期。<br>较为困难的是用户交互机制的设计。我先是设计键盘交互的部分，这一块较为简单。也没有需要调试的地方。但是当我加入鼠标交互功能是，却遇到了难题：当用户输入的时候，无法通过鼠标点击相应按钮实现功能。必须等到输入结束之后才能实现鼠标点击。而且需要鼠标点击的阶段也无法通过键盘操作。即无法同时用鼠标和键盘进行操作。<br>为了解决这一问题，我在需要用户操作的阶段设置了一个while(1)循环，里面先检测是否有键盘消息，如果没有再检测是否有鼠标消息。通过这样类似于多线程的方法，系统可以实现同时通过鼠标和键盘操作，代码如下：<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(kbhit())&#123;</span><br><span class="line">            <span class="keyword">char</span> k=getch();</span><br><span class="line">            <span class="keyword">if</span>(k==<span class="string">'\r'</span>)<span class="keyword">break</span>;<span class="comment">//确定</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> x,y;</span><br><span class="line">        <span class="keyword">if</span>(checkClick(&amp;x,&amp;y))&#123;</span><br><span class="line">            <span class="keyword">if</span>(checkIn(x,y,WIDTH/<span class="number">2</span><span class="number">-210</span>, HEIGHT<span class="number">-340</span>, <span class="number">160</span>, <span class="number">50</span>))<span class="keyword">break</span>;<span class="comment">//确定</span></span><br><span class="line">            <span class="keyword">if</span>(checkIn(x,y,WIDTH/<span class="number">2</span>+<span class="number">50</span>, HEIGHT<span class="number">-340</span>, <span class="number">160</span>, <span class="number">50</span>))<span class="keyword">return</span> <span class="number">0</span>;<span class="comment">//返回</span></span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>但是此时又造成了另一个问题——页面无法及时的更新。在之前的代码中，程序只有到getch()，即等待用户按键的时候，才会更新页面。原先因为只有键盘输入所以不会造成影响。而如今只有检测到键盘消息，才读取键盘操作，导致页面无法及时更新。思考片刻后，我认为系统只有等待的时候才会更新界面，所以我在每一处改变页面的代码之后加了<code>delay_fps(60)</code>延时函数。正如我猜想，加入延时函数之后，问题成功解决。</p><h2 id="测试结果"><a href="#测试结果" class="headerlink" title="测试结果"></a>测试结果</h2><ol><li>进入系统后，显示欢迎界面：<br><img src="欢迎界面.png" alt></li><li>按任意键进入系统主菜单，点击对应按钮进入对应的功能界面。<br><img src="系统主菜单.png" alt></li><li>进入购买车票的界面后，出现起止站的输入框。首先通过键盘输入起始站，将在输入框中出现相应字符。最多输入3个字符，而且必须是数字。点击确定或者按下回车键后，可以在目的地的输入框中输入。点击刷新按钮后可以从起始站重新输入。点击返回或者按下esc键将回到主界面。起止站输入完成后，点击确定键或者回车键，如果站台编号符合要求将进入输入票数的界面。若是不符合将被要求重新输入站台编号。<br><img src="输入起止站.png" alt></li><li>输入票数的界面中，标题下方显示两个站点之间最短距离的票价。再下面是询问购买的票数，可通过键盘输入数字字符，最多可输入一个字符。点击返回或者按下esc键回到上一界面。点击确定或者按下回车键进入下一界面。<br><img src="输入票数.png" alt></li><li>显示总价格，并且最后询问是否购买车票。点击返回或者按下esc键回到上一界面。点击确定或者按下回车键进入下一界面。<br><img src="询问是否购买.png" alt></li><li>投币界面中标题下方出现提示。按数字键可以在界面右下方的输入框中输入数字字符，最多可输入两个字符。点击确定或者回车键，如果投入的钱币小于总价格，则显示“钱币不足，请再次投币”。直到投入钱币总和大于等于总价格，到下一界面。<br><img src="投币.png" alt></li><li>购买成功后，显示信息与提示，按任意键返回主界面。<br><img src="购票成功界面.png" alt></li><li>进入地图查询界面后，显示地铁线路图，并且在线路图下方有输入框，可以输入站点编号。只能输入数字，且最多三个字符。点击查询可以在线路图右侧显示查询的地图信息。在屏幕右下方出现“继续查询”与“购票”按钮。点击“继续查询”，可以继续输入站点编码。点击“购票”按钮直接进入购票界面。点击返回或者按下esc键返回系统主界面。<br><img src="地图查询界面.png" alt></li><li>系统说明界面显示购票流程与用户须知，按任意键返回系统主界面。<br><img src="系统说明.png" alt></li></ol><h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><ol><li>无法输入中文字符。EGE自带的键盘输入字符函数是直接从读取按下的键盘按键，所以无法从输入法输入中文。唯一的解决方法是通inputbox_getline()函数，用对话框让用户输入一个字符串。但是因为对话框样式风格与系统界面不符，也没有找到改变对话框样式的方法，所以没有通过输入站台名称查询站台信息的功能。</li><li>没能清空鼠标缓存消息。不过好在这一点因为点击之后能够马上切换到新的界面，所以没有构成什么问题。</li></ol><h2 id="可提升空间"><a href="#可提升空间" class="headerlink" title="可提升空间"></a>可提升空间</h2><ol><li>当鼠标移到或点击按钮时，出现动画。</li><li>输入站名查询站点信息。</li><li>提供点击站点即可查询信息的功能。</li></ol><h2 id="分析总结与心得体会"><a href="#分析总结与心得体会" class="headerlink" title="分析总结与心得体会"></a>分析总结与心得体会</h2><p>本次程序设计，不仅让我复习巩固了许久未用的最短路径算法，并且让我熟悉了使用库函数设计用户交互界面。而且将代码写在不同文件中，自己写一个头文件也是第一次尝试。虽然在新事物上折腾了很多时间，但结果还是非常令人满意的。经过此次课程，我的确获得了极大的进步。</p>]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
      <category term="计算机" scheme="http://kxjzxc.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
      <category term="程序" scheme="http://kxjzxc.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E7%A8%8B%E5%BA%8F/"/>
    
      <category term="C/C++" scheme="http://kxjzxc.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E7%A8%8B%E5%BA%8F/C-C/"/>
    
    
      <category term="dijkstra" scheme="http://kxjzxc.github.io/tags/dijkstra/"/>
    
  </entry>
  
  <entry>
    <title>关于Codeblocks下安装EGE图形库这件事</title>
    <link href="http://kxjzxc.github.io/%E5%85%B3%E4%BA%8ECodeblocks%E4%B8%8B%E5%AE%89%E8%A3%85EGE%E5%9B%BE%E5%BD%A2%E5%BA%93%E8%BF%99%E4%BB%B6%E4%BA%8B.html"/>
    <id>http://kxjzxc.github.io/关于Codeblocks下安装EGE图形库这件事.html</id>
    <published>2019-07-05T14:26:23.000Z</published>
    <updated>2019-07-07T15:43:48.552Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h5 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h5><p>估计大部分需要学习C/C++语言的大学生都会被要求用该语言设计小游戏或者某某系统，然后就需要用到C++专有的图形库来设计人机交互界面。Windows下有许多图形库供我们选择，其中比较出名的就是EasyX。不过EasyX只适用于VC6或者VS系列的开发环境。由于懒得下载VS，又不适应VC6那古老的界面，所以我不打算用EasyX。在Windows环境中，我一般使用sublime text3编辑代码。可惜的是，我找寻了老长时间，也未曾找到可以在该编辑器中使用图形库的方法。因此，我打算使用原先便已安装的Codeblocks。在Codeblocks开发环境下，我使用的是EGE这种轻量级的图形库。虽然依旧为安装花费了半天时间，但最终结果也算是圆满的。</p><hr><h5 id="准备工具"><a href="#准备工具" class="headerlink" title="准备工具"></a>准备工具</h5><p>Codeblocks：最好安装最新版本。<br>EGE：我使用的是15.0.4版本，更高级的版本我实在用不来。反正我也不打算再用这玩意做图形界面了，就凑和着用。</p><h5 id="安装流程"><a href="#安装流程" class="headerlink" title="安装流程"></a>安装流程</h5><ol><li>找到Codeblock的文件夹，打开其中的MinGW文件夹<br><img src="cb-mingw.png" alt></li><li>将下载下来的EGE压缩包解压后，打开文件夹。<br><img src="EGE.png" alt></li><li>打开include文件夹,将里面的东西复制到之前打开的MinGW文件夹中的include文件夹里<br><img src="EGE-include.png" alt></li><li>打开lib文件夹，选择mingw4.8.1，将里面lib文件夹里的东西复制到MinGW文件夹中的lib中。<br><img src="EGE-lib.png" alt><br><img src="EGE-lib1.png" alt></li><li>打开codeblocks，新建一个项目，点击Project-&gt;Build options-&gt;Linker settings。在Link libraries中点击Add，选择添加文件的图标。进入MinGW下lib文件夹，寻找以下一系列文件”libgraphics.a””libgdi32.a” “libimm32.a” “libmsimg32.a””libole32.a” “liboleaut32.a” “libwinmm.a””libuuid.a”，可以直接全部粘贴上去，系统会自动生成路径。<br>然后在右边Other linker options中写上-mwindows。点击ok完成。<br><img src="Compiler-setting.png" alt><br>以上，EGE配置完成。之后你只要在敲代码是写上<code>#include&lt;graphics.h&gt;</code>就能使用图形库了。</li></ol><h5 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h5><ol><li>上述方法仅适用于当前设置的项目。如果要有新建了一个项目，要使用EGE图形库的话，需要再次进行第五步的配置。</li><li>如果觉得每次都设置很麻烦，可以自己新建一个模板，以后使用EGE的时候直接调用模板即可。<a href="https://blog.csdn.net/lx_asymmetric/article/details/78156734" target="_blank" rel="noopener">新建模板的方法点此</a>。 </li><li>使用时可能会遇到中文乱码的问题，可以自己去网上找解决方案，我也是糊里糊涂才调好的。</li><li>设置完成后，该项目就变成了绘图模式。在该模式下寻常的输入输出是无法在终端中显示的，无论是否调用了<code>#include&lt;graphics.h&gt;</code>头文件。这也是为什么我们不选择一劳永逸的配置方法。</li></ol>]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
      <category term="教程" scheme="http://kxjzxc.github.io/categories/%E6%95%99%E7%A8%8B/"/>
    
    
      <category term="教程" scheme="http://kxjzxc.github.io/tags/%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>关于使用sublime-text3编译C++程序这件事</title>
    <link href="http://kxjzxc.github.io/%E5%85%B3%E4%BA%8E%E4%BD%BF%E7%94%A8sublime-text3%E7%BC%96%E8%AF%91C++%E7%A8%8B%E5%BA%8F%E8%BF%99%E4%BB%B6%E4%BA%8B.html"/>
    <id>http://kxjzxc.github.io/关于使用sublime-text3编译C++程序这件事.html</id>
    <published>2019-07-05T14:24:27.000Z</published>
    <updated>2019-07-07T15:30:41.174Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h5 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h5><p>在Windows环境下，我比较喜欢使用sublime-text3作为代码编辑器。界面简洁舒适，敲代码的体验也非常好。<br>不过平时用sublime写写js还好，想要编译C++的话，就需要自己手动配置。配置的教程其实网上很多，也说的很明白。不过网上大部分的方法都有一点小问题，那就是无法用<code>scanf</code>或者<code>cin</code>输入，只能显示输出结果。因为它并没有调用终端，直接在底栏输出。<br>好在上周写作业的时候，偶然在网上找到了一份有效的教程，或者说有效的代码，能够调用系统终端运行程序。教程如下。</p><h5 id="教程"><a href="#教程" class="headerlink" title="教程"></a>教程</h5><ol><li>想要编译C++程序，必须要有<strong>编译器</strong>，像是gcc和g++。如果你的电脑上有可以编译C++的软件，像是C-free、dev-c、codeblocks、vs之类的，那么软件的文件中肯定有编译器。如果你的电脑上没有这些，那要么从网上下载一种C++编译软件，要么直接去下载MinGW。</li><li>右键<strong>我的电脑</strong>-&gt;属性-&gt;高级系统设置-&gt;高级-&gt;环境变量，在用户变量或者系统变量（两者都行，具体区别自行百度）中找到path，点击编辑，将你编译器所在的文件夹路径添加上去，然后点击确定。<br><img src="环境变量设置.png" alt></li><li>环境变量设置完成后，打开sublime，新建编译系统。由于我的sublime是汉化过的，所以选项是工具-&gt;编译系统-&gt;新建编译系统。</li><li>将下面的代码复制粘贴到配置文件后保存，保存到的文件夹不要改动。</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;cmd&quot;: [&quot;g++&quot;, &quot;$&#123;file&#125;&quot;, &quot;-fexec-charset=gbk&quot;, &quot;-o&quot;, &quot;$&#123;file_path&#125;/$&#123;file_base_name&#125;&quot;],</span><br><span class="line">    &quot;file_regex&quot;: &quot;^(..[^:]*):([0-9]+):?([0-9]+)?:? (.*)$&quot;,</span><br><span class="line">    &quot;working_dir&quot;: &quot;$&#123;file_path&#125;&quot;,</span><br><span class="line">    &quot;selector&quot;: &quot;source.c, source.c++&quot;,</span><br><span class="line">    &quot;variants&quot;:</span><br><span class="line">    [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;name&quot;: &quot;Run&quot;,</span><br><span class="line">            &quot;cmd&quot;: [&quot;cmd&quot;, &quot;/c&quot;, &quot;g++&quot;, &quot;$&#123;file&#125;&quot;, &quot;-o&quot;, &quot;$&#123;file_path&#125;/$&#123;file_base_name&#125;&quot;, &quot;&amp;&amp;&quot;, &quot;cmd&quot;, &quot;/c&quot;, &quot;$&#123;file_path&#125;/$&#123;file_base_name&#125;&quot;]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;name&quot;: &quot;RunInCommand&quot;,</span><br><span class="line">            &quot;cmd&quot;: [&quot;cmd&quot;, &quot;/c&quot;, &quot;g++&quot;, &quot;$&#123;file&#125;&quot;, &quot;-o&quot;, &quot;$&#123;file_path&#125;/$&#123;file_base_name&#125;&quot;, &quot;&amp;&amp;&quot;, &quot;start&quot;, &quot;cmd&quot;, &quot;/c&quot;, &quot;$&#123;file_path&#125;/$&#123;file_base_name&#125; &amp; pause&quot;]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>这一步是关键一步，也是不同教程中不同的一步。</p><ol start="5"><li>如此一来就配置好了，写一份C++代码，按<code>shift+ctrl+b</code>，选择<code>RunIncmd</code>那一项就可以了。以后编译也只用按<code>ctrl+b</code>。当然，你想的话也可以自己设置热键。</li></ol>]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
      <category term="教程" scheme="http://kxjzxc.github.io/categories/%E6%95%99%E7%A8%8B/"/>
    
    
      <category term="教程" scheme="http://kxjzxc.github.io/tags/%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>日渐颓废的平凡之路</title>
    <link href="http://kxjzxc.github.io/%E6%97%A5%E6%B8%90%E9%A2%93%E5%BA%9F%E7%9A%84%E5%B9%B3%E5%87%A1%E4%B9%8B%E8%B7%AF.html"/>
    <id>http://kxjzxc.github.io/日渐颓废的平凡之路.html</id>
    <published>2019-06-24T11:56:39.000Z</published>
    <updated>2019-06-24T12:19:21.806Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script>    <div id="aplayer-GfuGUIKE" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="28018269" data-server="netease" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#555"></div><p>高代考试的那天，正值夏至。<br>从那天起，白昼开始缩短，黑夜将逐渐变得漫长。就如同我的高等代数试卷被交上去地那一刻，一个学期结束，新的学期将至。</p><p>复(yu)习高代，我只用了一天时间。上午我还能将书上的课后习题一道一道地看过去，脑中想想解决方法，再看一眼答案验证思路。到了下午，一觉醒来之后突然就没了学习的热情，和室友有一搭没一搭地聊着，复习进度龟速前进。好在考试前也完成了复习任务，怀着表面自信，内心慌张地态度踏进考场，开始我的最后一门考试。其实不只是高等代数，像是之前的数学分析和大学物理，我也只在上面投入一两天的时间，而语文英语之流甚至片刻未学。并非我过于自信，不屑于这些考试，事实上这些课我学得都不是特别扎实，听课效率低到令人叹息。这笔记基本也没怎么做，后期全靠导图支撑。然而导图还是比较适合复习阶段，在学习方面并无太大作用。我之所以这么跳，除了考试周考试频率高外，大部分原因还是我的自控力太差，难以长时间专心致志地投入到枯燥的复习当中(或许有女朋友一起复习会比较有趣，然而我并没有)。或许正是因为复习的时候很颓废，所以考试周结束后并没有解放的感觉吧。</p><p>其实我的颓废也并非一日两日的事，而是从这个学期初便早有迹象。</p><p>暂且不谈上课的时候日常走神，本身投入到学业中的时间就很少。除了考试周之外，也只有自习课才会写一会作业。原本打算语文课上看书，英语课上看英文版的《傲慢与偏见》的计划也基本上没完成过，反倒是在知乎的碎片化阅读与爽文类的漫画中浪费了大把时间。前些天的六级让我意识到自己的英语已经退步到一种可悲的境地，甚至连初中时代都难以企及。至于大一的项目，磕磕绊绊，进度缓慢，一开始的方案也被推翻。前路迷茫，有时根本不知道该如何是好。自己的信心也在这一次一次的挫折前消磨，只想着早些结束。</p><p>最为颓废的是，曾经自诩为从不玩游戏的我也掉进了游戏的坑洞。最初接触游戏其实只是因为自己加入了社团里的游戏项目组，偶尔会接一些谜题设计的任务。不过那时候只是作为一个单纯的云玩家，在B站上云游戏视频。由于undertale、女神异闻录5、风之旅人这些剧情经常或是理念绝佳的游戏，让我对游戏的观念大大改变，可还是很少自己亲自玩游戏。主要还是觉得自己手残，而且没钱买正版和主机。一次偶然的机会，我在一家微信公众号上被推荐了一个游戏网站。该网站上都是从红白机上移植到PC上的经典街机游戏，像马里奥、魂斗罗之类的。因《高分少女》的影响，我对上个世纪的街机游戏黄金时代充满了好奇，所以不由自主地点了进去。不过很可惜，网站上大多都是战斗类游戏，正是我最不擅长且最无兴趣的种类，因而一两天就厌弃了。不过从那时起，我开始玩的游戏也越来越多：扫雷，俄罗斯方块、Nazo解谜网站、密室逃脱类游戏、仙剑奇侠传一、植物大战僵尸，deemo……不得不承认，我对游戏因此加深不少，甚至有以后干脆进入游戏行业的念头，但是耗费的时间还是颇让人吃惊。好在贫穷和电脑配置阻止了我痴迷游戏，止步于极少数优质的免费游戏。而由于四月份加入了桌游社，也有机会接触这个我一直以来都想加入的圈子。虽然到目前为止，也就只参与了两次活动，不过在社里的两位大佬的带领下，我也玩了不少从前前所未闻的游戏，像是烧脑的《推翻苏丹》《犯罪现场》，克苏鲁风格的跑团桌游《诡镇奇谈》《疯狂诡宅》，而我自己也购买了两款轻松简单的卡牌游戏《UNO》《爆炸猫咪》。我有种预感，或许将来我会有一大笔消费花在购买桌游上面呢。不过那些大桌游，动辄便是三四百，恐怕还得好好斟酌一二。</p><p>比起玩游戏，对于游戏的解构更让我感兴趣。像是游戏的核心机制，游戏的风格，游戏元素的组合……其主要原因还是我现在正在做游戏。当然，我说的不只是社团里的那个解谜RPG类游戏，还有另外一个基于前端语言的网页游戏。该游戏是我在六月初突发灵感且脑洞大开产生的，目前也只处在大纲设计完成，刚刚开始写HTML的阶段。我是打算将这个游戏作为我学习前端的一个项目来做。我是从这学期开始才打算学习前端的。最初不过是从github上找一些前端小项目，一边读着代码一边实现效果。这样虽然能学会很多，但并没发真正转变为自己的知识。后来又注册codewars，在上面刷了十来道js的题目，但效果依旧有限。想来想去，还是自己动手写项目会好一些，可惜并没有特别有兴趣的想法。直到这个游戏的构思诞生，我对学习前端有出现了动力，打算在此路上渐行渐远。</p><p>虽然感觉这学期事情不少，但实际上却觉得非常水。学习学得一般般，项目的进度缓慢无比，社团游戏没做多少，前端也没学到什么，还将一大堆时间浪费到碎片化阅读和游戏中……当真是日渐颓废。唯一比上学期有进步的大概就属小说写作。这大抵要归功于创意写作课和友人的激励。为了累积灵感，我还特意买了许多小本子随身携带，一有灵感就及时记录。不过说到底，我也只不过写了两篇，其中一篇还只是练笔。我真的担心自己对于写小说的热情会逐渐被繁重的事务所淹没，从而遗忘自己的初心。世上众人大多有志，却只有堪堪数人得以实现，着实令我焦虑。</p><p>不管怎么说，夏至已过，我的春季学期也随之结束。本学期的成绩还算平庸，门门八十几，既没有挂科，也没有很优秀。作为如此浪荡的复习结果，我已经是非常满意的了。愿来日漫长，岁月静好，路漫漫其修远兮，吾将上下而求索。</p><p>PS：以下是这几门的思维导图，不多，且不全，自取。<br> <a href="/2019/06/24/日渐颓废的平凡之路/思维导图.zip">点击下载</a><br>还有那个红白机网站<br><a href="https://yikm.net/" target="_blank" rel="noopener">点此穿越上世纪</a><br>以下是nazo解谜网站，有兴趣可以试一试，反正我到第三十四关玩不下去了。顺便一说，这个不让写攻略。<br><a href="https://nazo.one-story.cn/" target="_blank" rel="noopener">点此烧脑</a></p>]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>【练笔】家有史莱姆</title>
    <link href="http://kxjzxc.github.io/%E3%80%90%E7%BB%83%E7%AC%94%E3%80%91%E5%AE%B6%E6%9C%89%E5%8F%B2%E8%8E%B1%E5%A7%86.html"/>
    <id>http://kxjzxc.github.io/【练笔】家有史莱姆.html</id>
    <published>2019-06-22T14:32:10.000Z</published>
    <updated>2019-06-24T12:41:06.358Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script>    <div id="aplayer-XnmdmSDK" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="1368227452" data-server="netease" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#555"></div><p>“哇，好可爱的荧光兔！”<br>“这就是植入荧光基因的新品种吗，好漂亮的孩子！”<br>“软乎乎的，毛茸茸的，真想吸一辈子！”<br>“下班后，我也要去萌即正义旗舰店买一只回来！”<br>……<br>不远处充满兴奋的讨论声使得木友人有些心烦意乱，原本就很疲惫的他难以专心地继续调式bug。他那熊猫般的双眼略带不满地投向噪音的源头——几个女同事围绕着一只浑身散发着蓝色荧光的兔子像麻雀般叽叽喳喳个不停。而那只作为罪魁祸首的兔子正毫无自觉地趴在桌子上享受着女同事们的抚摸。<br>“女孩子向来对可爱的事物没有抵抗力，不是吗？”一旁的同事无精打采地以龟速敲打着键盘，显然也被那恼人的吵闹声影响到了。“嘛，虽然那只兔子是挺可爱的。”<br>木友人对这个话题并没有太大的兴趣，只是随便回应了一句表示赞同对方的话语。<br>“其实呢，我也挺想养只宠物的，”可惜无心工作的同事并没有打算放过这个话题，“像猫啊，狗啊之类的，每天回到家抱起来吸几口，治愈一下都市人疲惫的心灵。可恶，好羡慕！”<br>“等你回家的时候，你家宠物估计都躺在窝中做着美梦呢……”木友人吐槽道。<br>“……说的也是，这该死的工作什么时候能结束啊！”同事双手胡乱揉了揉头发，然后一脸颓废地将头垂在桌上。忽然同事侧过头望向木友人问道，“话说，你有养宠物吗？”<br>“没……”刚想否认的木友人突然想起了什么，改口道：“我好像养了一只……虽然不知道是不是还活着……”<br>“突然有些同情你家宠物了……你养的啥？”<br>“史莱姆。”<br>同事眨了眨眼睛，“史莱姆？”<br>木友人点了点头。<br>“生物清道夫有线公司买的那种？”<br>“我可买不起高级品种。”木友人一边敲着代码，一边缓缓说道，“只是因为我每天下班回家太晚，没时间打扫房间，这才去店里买了只史莱姆回来。之后也就完全没管它了。毕竟房间天天都需要清理，饿不死它。大概。”<br>“你这根本就不算是宠物吧，完全是当仆人来用的吧。”同事有些无奈地叹了口气，然后靠在椅背上，用手指按摩着自己的鼻梁，“我敢说你连名字都没给它取。”<br>木友人沉默地看着电脑屏幕，并没有反驳同事。说到底他的确只是把那只史莱姆当做家用清理机器人来用，而且关于史莱姆这种人造产品能否真的作为一个生命来看待也是个迷。</p><p>回到家的时候已经是第二天凌晨一两点钟，房间里寂静无声，漆黑一片。这几天连着加班，无论是身体还是心灵都早已疲惫不堪，所幸今天拼了老命终于完成了手头的工作，明天周日也能够稍微休息休息。想到此处，木友人顿时觉得生活充满了希望，眼前无尽的黑暗中仿佛出现了一点荧光，然后一阵晕眩袭来，整个人瘫倒在某种软乎乎的凉丝丝的事物上，疲惫感如潮水般将他淹没，陷入了香甜的睡梦之中。</p><p>再次从慵懒的睡梦中醒来时，木友人眼中是自己熟悉中待着陌生的卧室。他这一觉睡了足有十来个小时，温暖的阳光已将卧室照得通明。他感到自己怀里似乎有什么软乎乎的东西，惺忪的睡眼低头一看，那是一个光溜溜的富有弹性的半固态流体，在明亮的阳光照射下呈现出透明的淡蓝色。流体中间有一颗拳头大小的透明圆球，缓慢而安稳地跳动着。<br>毫无疑问，这是他的史莱姆。<br>史莱姆是不需要睡眠的。作为人造生物，人类只赋予了它清理污渍的使命。估计是感受到他几天没有洗澡，身上全是脏东西才依靠本能靠过来的。木友人苦笑着伸了个懒腰，决定先去洗个澡，然后开始他美好且轻松的假日时光。<br>似乎是感到自己的主人已经苏醒，史莱姆一蹦一蹦地来到阳台上，在明亮的阳光下缩成一个水珠状的椭球。借助太阳光，史莱姆正在消化积攒在它体内的污渍。若有若无的气体在如同蓝宝石般光滑的表面上飘动着，甚是漂亮。<br>洗完澡出来后，史莱姆的的踪影已消失不见了。想来是消化完成，跑去清理屋子里。木友人也没放在心上，穿上松松垮垮的家居服，便走到零食柜前，打算拿上几包零食去客厅打游戏。可惜计划赶不上变化，木友人看着空空如也的柜子，心里疑惑着自己前不久刚买的零食怎么那么快就吃完了，感觉他平时好像也没吃多少。想来想去，也只能把锅扣到繁忙的加班让他变得有些健忘。<br>在网上购入了一箱新零食后，木友人走到客厅里以最舒服最慵懒的姿势陷入柔软的沙发上，打开电视播放起这个季度的新番。这部新番倒也不是那么精彩，不过是一群人嘻嘻哈哈的日常生活，但对于身心俱疲的木友人来说却是极佳的疗品。相比之下，那些精彩万分，富有深度的动画却渐渐很难吸引他的兴趣了，毕竟作为休息的假日时光他可不想在调动自己的脑袋。<br>正当他津津有味地看着动画时，他家的史莱姆君不知何时也坐到了沙发上，就像是在同他一起观看这部动画。木友人的注意力瞬间被这个有趣的小家伙吸引住了。只见他那颗圆润的核心以一种欢快轻松的跃动着，蓝色透明的流体时不时地荡起一阵不规律的涟漪，仿佛是因为有趣的剧情而发笑。史莱姆也会看动画吗？这种事情倒是第一次听说，不，倒不如说他从来就没有关心过自家的史莱姆。正如他同事所说的那样，他连名字都没给它取。<br>突然，某样东西让他瞪大了眼睛——那是一片黄灿灿的薄薄的像是薯片的东西。观察了足足五秒后，他无比确信地把“像是”二字去掉了。这就是一片薯片。待到那片薯片逐渐溶解在那透明的液体中，一只蓝色的触手从史莱姆身上伸了出来，伸向玻璃茶几上的一包不知何时出现的开封的薯片袋，卷起一片薯片后猛地缩回体内。整套动作行云流水，流畅无比，让人难以置信。木友人吃惊地看着自家史莱姆，一个大胆的想法逐渐在他脑海中成型。<br>“我说，”木友人用手扭着史莱姆富有弹性的身体向两边拉扯，后者立刻变成了一个可笑的形状，“我的零食不会都是被你偷吃光的吧！”<br>“您好，您的快递已送达，快递员正在门口等候。”此时手机一阵振动，传来了优雅悦耳的女声。木友人只得暂时松开自己的双手，起身走到门口取快递。<br>“好嘞，现在没有人打扰了，我的死宅生活正式开启！”木友人将零食箱放在客厅的地上，从电视底下拿出尘封……已久的游戏手柄？木友人看着手上光滑干净如同新品的游戏机，若不是上面有许多划痕之类的痕迹，他真的很怀疑这是不是自己的手柄。木友人回头望了一眼沙发上若无其事地“吃”薯片的史莱姆，然后猛地甩了甩头，拍了拍自己的脸颊：“说不定只是它经常清理过……”<br>话音未落，便见听见一阵熟悉的音乐响起，吓得他赶忙向后退了几步，却看见自家史莱姆不知何时来到了电视机前，像个老司机般熟练地连接手柄，选择游戏，点击开始，然后在富有节奏感的背景音乐声中，淡蓝柔软的触手在黑色的手柄上快速地按动，控制着屏幕上的游戏角色在华丽炫目的弹幕中穿梭，杀怪，闯关……那模样，完全不像是一个智能有限，只会清理的人造生物，而像是一个拥有多年玩游戏经验的老手，在自己的领域中叱咤风云。<br>“这……这家伙不会趁我不在家的时候把我的游戏都玩了一遍吧！”由于眼前的事实过于令人震惊，木友人呆呆站在原地，顿时有些不知所措。回想起刚刚自家史莱姆看动画，吃薯片的场景，木友人觉得自己完全小瞧了眼前这个花一千块钱买来的小家伙。自从买到家里已经有半年多了，这期间木友人回家的次数屈指可数，而且每次都是疲惫地到头就睡，一觉睡到天明后又匆匆忙忙地感到公司，对这家伙算是完全不了解。原以为不过是只是打扫房间的清道夫，却万万没想到竟成长为一个连他都比不过的老司机。说不定，每天都宅在家中看动画，玩游戏，吃零食，过着令人羡慕，呸，无比堕落的宅男生活……<br>正当木友人沉浸在自己杂乱忽然他感到脚踝处传来一阵冰冰凉凉的触感，下意识地低头一看，是自家史莱姆的触手。木友人疑惑地望着史莱姆，然后似乎明白了些什么地看了一眼屏幕。屏幕上是双人模式中选择角色的界面，其中一方已经选定，而另一方则迟迟未动。史莱姆安静地持着游戏手柄，仿佛，不，就是在等待着木友人选择角色。<br>原先脸上阴晴不定的木友人愣了愣，不由自主地发出奇怪地笑声，脑中乱七八糟的想法全都烟消云散。<br>“算了，难得的休息日，不想那么多了。”他深深地吸了一口气，决定放弃了思考，认命般地盘腿坐下，拿着手柄开始挑选角色。<br>“你是想和我一起玩一局吗？”<br>“……”<br>“事先说明，我可是人称独孤求败的游戏小王子。”<br>“……”<br>“让你见识见识我的厉害，emmm……就叫你波奇好了！”<br>“……”<br>“波奇，看招……”</p><hr><p>其实这一篇是十天前就已经完成的练笔，只不过今天才有时间发布到博客上。<br>关于这篇练笔的题目来源于创意写作书系中《开始写吧！虚构文学创作》中的第三篇《我的宠物》。由于我这人没有幻想元素的故事完全没有兴趣写，所以宠物从一开始就设定成现实世界中没有的动物。最初我是打算写玄武型宠物机器人的，一种好养又宅的宠物。与此对应，它的主人则是一个被996的生活压迫着的社畜，虽然内心是一个喜欢看动画玩游戏宅在家中不动弹的宅男，但却被繁重的工作所压迫连续好几天都没有回家。后来玄武机器人改成了史莱姆，其他设定却没怎么改。毕竟软萌软萌的史莱姆配上死宅的生活方式，感觉会很有趣呢。<br>然而，这篇文章前面写的时候还行，到了最后却明显地感到后劲不足，像是主人公内心的转变就完全没有写到位。如今，虽然对此略加修改，加了一些心理活动，却依旧感到不尽如人意。看来还是自身修炼未曾达标。</p>]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
      <category term="我的小说" scheme="http://kxjzxc.github.io/categories/%E6%88%91%E7%9A%84%E5%B0%8F%E8%AF%B4/"/>
    
      <category term="练笔" scheme="http://kxjzxc.github.io/categories/%E6%88%91%E7%9A%84%E5%B0%8F%E8%AF%B4/%E7%BB%83%E7%AC%94/"/>
    
    
      <category term="我的小说" scheme="http://kxjzxc.github.io/tags/%E6%88%91%E7%9A%84%E5%B0%8F%E8%AF%B4/"/>
    
      <category term="练笔" scheme="http://kxjzxc.github.io/tags/%E7%BB%83%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>用键盘控制图标移动</title>
    <link href="http://kxjzxc.github.io/%E7%94%A8%E9%94%AE%E7%9B%98%E6%8E%A7%E5%88%B6%E5%9B%BE%E6%A0%87%E7%A7%BB%E5%8A%A8.html"/>
    <id>http://kxjzxc.github.io/用键盘控制图标移动.html</id>
    <published>2019-05-22T15:18:25.000Z</published>
    <updated>2019-05-22T15:30:40.868Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>之前几个小项目，我都是照着代码敲下来。但是发现这样的效果并不是特别好，所以这个项目我改变了策略，打算先看懂代码，然后再自己手敲。<br>这份代码我一直想读一读，读下来之后也发现不是特别的困难，也没有什么特别重要的新知识。<br><a href="/2019/05/22/用键盘控制图标移动/keyScrollico.html">点此体验</a><br>代码并没有什么地方需要解释的，就直接呈出来了。</p><h4 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>键盘控制图标<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"keyScrollball.css"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"keyScrollball.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="CSS"><a href="#CSS" class="headerlink" title="CSS"></a>CSS</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">charset</span> <span class="string">"utf-8"</span>;</span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line"><span class="attribute">background</span>:<span class="number">#CCC</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">div</span>&#123;</span><br><span class="line"><span class="attribute">width</span>:<span class="number">60px</span>;</span><br><span class="line"><span class="attribute">height</span>:<span class="number">60px</span>;</span><br><span class="line"><span class="attribute">background</span>:brown;</span><br><span class="line"><span class="attribute">position</span>:absolute;</span><br><span class="line"><span class="comment">/*属性允许向元素添加圆角*/</span></span><br><span class="line"><span class="attribute">border-radius</span>:<span class="number">30px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="JAVASCRIPT"><a href="#JAVASCRIPT" class="headerlink" title="JAVASCRIPT"></a>JAVASCRIPT</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> box=<span class="built_in">document</span>.getElementById(<span class="string">"box"</span>);</span><br><span class="line"><span class="comment">//网页可见区域宽，兼容各种浏览器</span></span><br><span class="line"><span class="keyword">var</span> MapWidth=<span class="built_in">document</span>.body.clientWidth||<span class="built_in">document</span>.documentElement.clientWidth;</span><br><span class="line"><span class="comment">//网页可见区域高，兼容各种浏览器</span></span><br><span class="line"><span class="keyword">var</span> MapHeight=<span class="built_in">document</span>.body.clientHeight||<span class="built_in">document</span>.documentElement.clientHeight;</span><br><span class="line"><span class="keyword">var</span> timer=<span class="literal">null</span>;</span><br><span class="line"><span class="built_in">document</span>.onkeydown=<span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> ev=ev||<span class="built_in">window</span>.event;</span><br><span class="line">clearInterval(timer);</span><br><span class="line"><span class="comment">//只要键盘按着每隔10ms移动一次</span></span><br><span class="line">timer=setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">switch</span>(ev.keyCode)&#123;</span><br><span class="line"><span class="keyword">case</span> <span class="number">37</span>: </span><br><span class="line"><span class="keyword">if</span>(box.offsetLeft&gt;<span class="number">0</span>)&#123;</span><br><span class="line">box.style.left=box.offsetLeft<span class="number">-10</span>+<span class="string">"px"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">38</span>:</span><br><span class="line"><span class="keyword">if</span>(box.offsetTop&gt;<span class="number">0</span>)&#123;</span><br><span class="line">box.style.top=box.offsetTop<span class="number">-10</span>+<span class="string">"px"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">39</span>:</span><br><span class="line"><span class="keyword">if</span>(box.offsetLeft&lt;MapWidth-box.offsetWidth)&#123;</span><br><span class="line">box.style.left=box.offsetLeft+<span class="number">10</span>+<span class="string">"px"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line"><span class="keyword">case</span> <span class="number">40</span>:</span><br><span class="line"><span class="keyword">if</span>(box.offsetTop&lt;MapHeight-box.offsetHeight)&#123;</span><br><span class="line">box.style.top=box.offsetTop+<span class="number">10</span>+<span class="string">"px"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,<span class="number">10</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">document</span>.onkeyup=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">clearInterval(timer);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
      <category term="计算机" scheme="http://kxjzxc.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
      <category term="程序" scheme="http://kxjzxc.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E7%A8%8B%E5%BA%8F/"/>
    
      <category term="前端" scheme="http://kxjzxc.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E7%A8%8B%E5%BA%8F/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="前端" scheme="http://kxjzxc.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>那些年，我与MP3的往事</title>
    <link href="http://kxjzxc.github.io/%E9%82%A3%E4%BA%9B%E5%B9%B4%EF%BC%8C%E6%88%91%E4%B8%8EMP3%E7%9A%84%E5%BE%80%E4%BA%8B.html"/>
    <id>http://kxjzxc.github.io/那些年，我与MP3的往事.html</id>
    <published>2019-05-19T01:34:14.000Z</published>
    <updated>2019-05-20T10:06:04.982Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h2 id="在我的学生生涯中，MP3是不可或缺的一部分。一直以来，我都很想将自己与MP3的故事记录下来，写成诗歌，写成小说。因此也借着此次语文期中作业机会，我为其写了这篇文章。"><a href="#在我的学生生涯中，MP3是不可或缺的一部分。一直以来，我都很想将自己与MP3的故事记录下来，写成诗歌，写成小说。因此也借着此次语文期中作业机会，我为其写了这篇文章。" class="headerlink" title="在我的学生生涯中，MP3是不可或缺的一部分。一直以来，我都很想将自己与MP3的故事记录下来，写成诗歌，写成小说。因此也借着此次语文期中作业机会，我为其写了这篇文章。"></a>在我的学生生涯中，MP3是不可或缺的一部分。一直以来，我都很想将自己与MP3的故事记录下来，写成诗歌，写成小说。因此也借着此次语文期中作业机会，我为其写了这篇文章。</h2><p>十四岁那年，朋友送了我一部MP3作为生日礼物。<br>那是一款学生用的无屏随身听，只有掌心大小，颇为小巧可爱。金属外壳是漂亮的大红色，配上按键的纯白，给人一种简约清爽的感觉。我喜欢把它掂在手中，感受着它那沉沉的质感，仿佛一颗美丽的红宝石，承载着空灵而神秘的世界。<br>我的初中是属于那种全封闭式的寄宿学校，每两个星期才放一次假期，平常除了信息课很少有机会能够听音乐。在此之前的一段时间，我都是用复读机来听歌的。我并没有零花钱去买音乐磁带，我的复读机也不是那种可以插U盘的类型。但是听歌的欲望总是在我心中燃烧，驱动着我自己动手录歌。因为作业的需要，我曾经买过两盒空白磁带。周末回家的时候将让手机外放着自己想要听的歌，然后与开启录音模式的复读机一同放在厚厚的棉被中，再锁上房门，等待着磁带录完。尽管我努力营造一个安静的环境，但是录入的曲子还是不可避免地混有嘈杂的噪音。不过对于那时的我而言，在相对沉闷且忙碌的校园生活中能听到自己想听的歌曲，这些刺耳的杂音完全是可以忽略不计的。<br>有了MP3后，我听歌的品质和数量都上升了一个档次。那时候，我听歌很杂，从中文到英文，从人声到纯音乐，只要是旋律能让我喜欢，无论雅俗，我向来是来者不拒。每个寂静昏暗的夜晚，我躺在自己的床偷偷地听着耳机中风格迥异的歌曲，都会感觉内心无比的愉悦，仿佛整个人乘着呼啸的夜风，翱翔在月光澄澈的云海中，感受着世界的广阔无垠。此时此刻，白天里的一切喜怒哀乐都揉碎在耳畔的歌曲中，沉淀，消散，只留下颤抖的心灵逐渐陷入沉睡。<br>其实我的中学是向来不允许学生携带MP3这类电子物品的，只不过从来都有学生敢于打破这一规定，在教务处的搜查下暗地行动。无论是过去，现在，还是未来，学生与教务处之间永远存在着战争。只不过这也为我带来了诸多烦恼，如何充电，如何避免搜查……有时候甚至自己吓得自己思考出一系列被发现后的应对方案。而我也不太敢随身携带，一来害怕教务处随机搜查，二来也担心一不小心开了机，又将好不容易充好的电耗得一干二净。所幸在剩下的初中时光中，我和我的MP3成功逃过了每一劫，安然无恙地度过我压力最大的那一年。<br>可惜的是，也许是因为我太不懂得珍惜，我的MP3慢慢地开始损坏：按键不灵，耳机孔损坏……它仿佛一个风烛残年的老人，各种各样的毛病浮现出来，最终在无力的拯救中完全失灵。心怀着叹息与遗憾，我将其藏在了自己的物品盒中，永远封存。<br>那时我已成为了一个高中生，并且参加了学校里的信息学竞赛。教练允许我们一边敲代码一边戴着耳机听歌，我不再需要像初中那样偷偷摸摸地听歌。所以我并没有再次购入MP3的打算。然而，我与MP3之间的缘分似乎未尽。由于意外，我不小心将同学的MP3弄到了水中。赔偿新的之后，这个不幸的MP3自然也就成了我的新伙伴。<br>我的新伙伴不再像之前那部是个无名小卒，而是索尼家族的贵公子。昂贵的价格，修长的外形，华丽的金色，极高的音质，完全有资格傲视大多数同僚。可惜这玩意儿跟了我，算是倒了八辈子霉——掉水里两次，拆了六七次，摔倒地上无数次，屏幕与开机键不知所踪，螺丝钉也有缺失，两个音量键都是降低……而即便经历了如此灾厄，它依旧能够正常开机。如果将它拟化成一个人的话，那必然称得上是一届传奇人物。<br>虽然此MP3的确可以开机，但是是否能够播放音乐那完全就是个玄学。唯有天时地利人和三者全齐，方可一听其中乐曲。故此我学竞赛的那段时间，基本上只是将它作为U盘使用，平日里若是能听偶尔还是会听听，若是听不了那也无所谓。比起只能听歌和电台的它，室友那能看电子书的MP3才更是吸引人，虽然黑眼圈也会随之而来。不过待到我以遗憾的成绩结束我的竞赛生涯后，我的MP3作为随身听的功能才愈发受到了重视。每当我费劲按下那残缺的开机键，都像是一次令人期待的赌博。成功还是失败，每一次的结果都是难以预测的。甚至有时候第一次失败，下一次就成功了，所以我每次都会试个七八次才肯彻底死心。也正是因为如此，听歌的喜悦才会更加强烈，如同无尽荒漠中饥渴的旅人遇见一片美丽的绿洲。我至今记得那个疲惫的夜晚，许多天不曾听歌的我躺在床上凝视着昏暗的天花板，耳畔播放着优美动听的纯音乐，宛如聆听着天籁，心中洋溢着无与伦比的感动。那真是此生难忘的经历。<br>到了后来，我上了大学，手机逐渐替代了MP3的地位。我很少再打开MP3，只是偶尔为了专心学习才记起它的存在。去年十一月，正在纠结论文题目的我回忆起与它的种种过往，决心写一篇关于音乐播放器的论文。然而几天后，它便丢了。那篇论文也因为水平原因，主题变成了留声机。从此MP3消失在我的人生中。<br>时至今日，我收藏了几千首音乐，后摇，古典，爵士，摇滚……所听歌曲也与往日大有不同。身为重度音乐患者的我，无论是走路也好，吃饭也好，或者是写作业，都会随自己心意听上几小时的音乐。我的蓝牙耳机插上内存卡之后也能够作为MP3来使用。<br>可我还是常常回忆起那些被繁星点缀的夜空与广阔无垠的云海。那是梦境？亦或是现实？我无从得知。我只知道，从那以后，我从未遇见在那些夜晚曾感受到的自由。</p>]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
      <category term="杂" scheme="http://kxjzxc.github.io/categories/%E6%9D%82/"/>
    
    
      <category term="杂" scheme="http://kxjzxc.github.io/tags/%E6%9D%82/"/>
    
  </entry>
  
  <entry>
    <title>基于js的图标移动代码</title>
    <link href="http://kxjzxc.github.io/%E5%9F%BA%E4%BA%8Ejs%E7%9A%84%E5%9B%BE%E6%A0%87%E7%A7%BB%E5%8A%A8%E4%BB%A3%E7%A0%81.html"/>
    <id>http://kxjzxc.github.io/基于js的图标移动代码.html</id>
    <published>2019-05-17T15:57:08.000Z</published>
    <updated>2019-05-17T16:20:48.727Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>这份代码写得极其糟心。<br>一来自己写这个样例的时候一直在拖，花了好几天才写完。<br>二来原代码中有一些搞不明白的东西，也看不出来在代码中的作用，到后来索性都删了。<br>再有就是外联css不知为何用不起来，闹腾了半天，只能和html放在一起写。<br>最后就是找bug花了一堆时间，甚是难受。<br><a href="/2019/05/17/基于js的图标移动代码/moveLoad.html">点此体验</a><br>而我也懒得讲了，这里直接放代码算了。</p><h4 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h4><h5 id="html-amp-amp-css"><a href="#html-amp-amp-css" class="headerlink" title="html&amp;&amp;css"></a>html&amp;&amp;css</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html;charset=UTF-8"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">title</span>&gt;</span>图标移动<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"moveLoad.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&lt;link rel="stylesheet" hrel="moveLoad.css"/&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">*&#123;</span></span><br><span class="line"><span class="undefined">       margin: 0;</span></span><br><span class="line"><span class="undefined">padding: 0;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">div&#123;</span></span><br><span class="line"><span class="undefined">position: absolute;</span></span><br><span class="line"><span class="undefined">width: 30px;</span></span><br><span class="line"><span class="undefined">height: 45px; </span></span><br><span class="line"><span class="undefined">background: url("./images/V.ico") no-repeat center center;</span></span><br><span class="line"><span class="undefined">background-size: 76px 55px;</span></span><br><span class="line"><span class="css"><span class="selector-tag">top</span><span class="selector-pseudo">:100px</span>;</span></span><br><span class="line"><span class="css"><span class="selector-tag">left</span><span class="selector-pseudo">:50px</span>;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="css"><span class="selector-tag">p</span>,<span class="selector-tag">input</span>&#123;<span class="attribute">margin</span>: <span class="number">10px</span>;&#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"根据鼠标点击位置移动"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"根据标鼠标轨迹移动"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>请点击按钮激活功能！<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="js"><a href="#js" class="headerlink" title="js"></a>js</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line">window.onload=function()&#123;</span><br><span class="line">//图标</span><br><span class="line">var oDiv=document.getElementsByTagName(&quot;div&quot;)[0];</span><br><span class="line">var aInput=document.getElementsByTagName(&quot;input&quot;);</span><br><span class="line">var oP=document.getElementsByTagName(&quot;p&quot;)[0];</span><br><span class="line">//移动到鼠标点击的位置</span><br><span class="line">aInput[0].onclick=function(event)&#123;</span><br><span class="line">//清空事件</span><br><span class="line">clearEvent();</span><br><span class="line">this.value +=&quot;(已激活)&quot;;</span><br><span class="line">oP.innerHTML=&quot;鼠标点击页面，图标将移动至鼠标位置！&quot;</span><br><span class="line">//鼠标点击</span><br><span class="line">document.onclick=function(event)&#123;</span><br><span class="line">var event=event||window.event;</span><br><span class="line">//开始移动</span><br><span class="line">clearInterval(oDiv.timer);</span><br><span class="line">oDiv.timer=setInterval(function ()&#123;</span><br><span class="line">                var X=(event.clientX-oDiv.offsetLeft)/5;</span><br><span class="line">                var Y=(event.clientY-oDiv.offsetTop)/5;</span><br><span class="line">                //ceil()向上取整，floor()向下取整</span><br><span class="line">                X=X&gt;0?Math.ceil(X):Math.floor(X);</span><br><span class="line">                Y=Y&gt;0?Math.ceil(Y):Math.floor(Y);</span><br><span class="line">               if(event.clientX==oDiv.offsetLeft&amp;&amp;event.clientY==oDiv.offsetTop)&#123;</span><br><span class="line">                        clearInterval(oDiv.timer);</span><br><span class="line">                &#125;</span><br><span class="line">                else &#123;</span><br><span class="line">                        oDiv.style.left=oDiv.offsetLeft+X+&quot;px&quot;;</span><br><span class="line">                        oDiv.style.top=oDiv.offsetTop+Y+&quot;px&quot;;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;,30);</span><br><span class="line">return false;</span><br><span class="line">&#125;</span><br><span class="line">&#125;;</span><br><span class="line">        //图标跟随鼠标移动轨迹移动</span><br><span class="line">aInput[1].onclick=function(event)&#123;</span><br><span class="line">clearEvent();</span><br><span class="line">this.value+=&quot;(已激活)&quot;;</span><br><span class="line">oP.innerHTML = &quot;按住鼠标左键，在页面划动，图标将按照鼠标轨迹移动。&quot;</span><br><span class="line"> //鼠标的位置</span><br><span class="line">var aPos=[&#123;x:oDiv.offsetLeft,y:oDiv.offsetTop&#125;];</span><br><span class="line">//鼠标按下</span><br><span class="line">document.onmousedown=function(event)&#123;</span><br><span class="line">var event=event||window.event;</span><br><span class="line">//记录当前图标的位置</span><br><span class="line">aPos.push(&#123;x:event.clientX,y:event.clientY&#125;);</span><br><span class="line">document.onmousemove=function(event)&#123;</span><br><span class="line">var event=event||window.event;</span><br><span class="line">//记录路上鼠标的位置</span><br><span class="line">aPos.push(&#123;x:event.clientX,y:event.clientY&#125;);</span><br><span class="line">return false;</span><br><span class="line">&#125;</span><br><span class="line">return false;</span><br><span class="line">&#125;</span><br><span class="line">document.onmouseup=function(event)&#123;</span><br><span class="line">//初始化鼠标移动的事件</span><br><span class="line">document.onmousemove=null;</span><br><span class="line">//setInterval(code,time)可按照指定的周期（以毫秒计）来调用函数或计算表达式。</span><br><span class="line">var timer=setInterval(</span><br><span class="line">function()&#123;</span><br><span class="line">//如果没有坐标需要移动了，停止周期函数</span><br><span class="line">if(aPos.length==0)&#123;</span><br><span class="line">clearInterval(timer);</span><br><span class="line">return;</span><br><span class="line">&#125;</span><br><span class="line">//设置图标位置</span><br><span class="line">oDiv.style.left=aPos[0].x+&quot;px&quot;;</span><br><span class="line">oDiv.style.top=aPos[0].y+&quot;px&quot;;</span><br><span class="line">//弹出数组中的元素</span><br><span class="line">aPos.shift();</span><br><span class="line">&#125;,30);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">//清空事件</span><br><span class="line">function clearEvent()&#123;</span><br><span class="line">document.onclick=null;</span><br><span class="line">document.onmousedown=null;</span><br><span class="line">document.onmousemove=null;</span><br><span class="line">document.onmouseup=null;</span><br><span class="line">for(var i=0;i&lt;aInput.length;i++)&#123;</span><br><span class="line">aInput[i].value=aInput[i].value.replace(&quot;(已激活)&quot;,&quot;&quot;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
      <category term="计算机" scheme="http://kxjzxc.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
      <category term="程序" scheme="http://kxjzxc.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E7%A8%8B%E5%BA%8F/"/>
    
      <category term="前端" scheme="http://kxjzxc.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E7%A8%8B%E5%BA%8F/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="前端" scheme="http://kxjzxc.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>Codewars之JS题解</title>
    <link href="http://kxjzxc.github.io/Codewars%E4%B9%8BJS%E9%A2%98%E8%A7%A3.html"/>
    <id>http://kxjzxc.github.io/Codewars之JS题解.html</id>
    <published>2019-05-09T14:01:24.000Z</published>
    <updated>2019-05-21T10:05:45.567Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>这一篇文章主要是写一些我在Codewars上写到的js题目。</p><hr><p>2019.5.9</p><h4 id="Disemvowel-Trolls"><a href="#Disemvowel-Trolls" class="headerlink" title="Disemvowel Trolls"></a>Disemvowel Trolls</h4><h5 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h5><p>将一行字符串中的元音字符删去，并返回修改后的字符串。</p><h5 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h5><p>直接使用字符串自带的函数<code>replace</code>。<br><code>str.replace(x,y)</code>表示将与正则表达式x匹配的子串替换成y字符串<br>我们所需要的正则表达式为<code>/[aeiou]/gi</code><br>/g表示执行全局匹配<br>/i表示对大小写不敏感<br>因为是删去，所以我们把匹配到的子串替换成空字符，即’’</p><h5 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">disemvowel</span>(<span class="params">str</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> str.replace(<span class="regexp">/[aeiou]/gi</span>, <span class="string">''</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="List-Filtering"><a href="#List-Filtering" class="headerlink" title="List Filtering"></a>List Filtering</h4><h5 id="题目-1"><a href="#题目-1" class="headerlink" title="题目"></a>题目</h5><p>给定一个只含有数字类型和字符串类型元素的数组对象，过滤其中的字符串，并输出。</p><h5 id="题解-1"><a href="#题解-1" class="headerlink" title="题解"></a>题解</h5><p>数组对象有一个函数是<code>filter()</code>,功能为创建一个新的数组，新数组中的元素是通过检查指定数组中符合条件的元素。<br>那么接下来就是判断一个元素是否为数字类型。通过<code>typeof</code>我们可以得到一个元素的数据类型，如果等于’number’那么就是数字类型。</p><h5 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">check</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> e == <span class="string">"number"</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filter_list</span>(<span class="params">l</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// Return a new array with the strings filtered out</span></span><br><span class="line">  <span class="keyword">return</span> l.filter(check);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>2019.5.12</p><h4 id="Number-of-People-in-the-Bus"><a href="#Number-of-People-in-the-Bus" class="headerlink" title="Number of People in the Bus"></a>Number of People in the Bus</h4><h5 id="题目-2"><a href="#题目-2" class="headerlink" title="题目"></a>题目</h5><p>给定一个数组，表示n个车站。数组中的每个元素包含两个整型，分别表示每一个车站的上车人数和下车人数。求到最后一站时车上还剩下的人数。</p><h5 id="题解-2"><a href="#题解-2" class="headerlink" title="题解"></a>题解</h5><p>代码很好写，但是js代码要用js特色的代码。<br>数组中自带的reduce函数，功能为从左到右将元素通过括号里的函数累加。<br><code>(a,b)=&gt;(a+b)</code>是函数的另一种表现形式，等价于<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> (<span class="params">a,b</span>)</span>&#123;</span><br><span class="line"> <span class="keyword">return</span> a+b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h5 id="代码-2"><a href="#代码-2" class="headerlink" title="代码"></a>代码</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var number = function(busStops)&#123;</span><br><span class="line">  // Good Luck!</span><br><span class="line">  return busStops.reduce((ans,[add,dec])=&gt;ans+add-dec,0);//0表示初始值</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>2019.5.14</p><h4 id="Your-order-please"><a href="#Your-order-please" class="headerlink" title="Your order, please"></a>Your order, please</h4><h5 id="题目-3"><a href="#题目-3" class="headerlink" title="题目"></a>题目</h5><p>给定一个字符串，字符串中的每一个单词都包含着一个单独的数字，位置不定。<br>数字的范围为1-9，请按照数字从小到大对单词进行排序。<br>输出排序后的字符串。</p><h5 id="题解-3"><a href="#题解-3" class="headerlink" title="题解"></a>题解</h5><p>这题应该是我第一次用JS语言的风格单独写出来的题。之前的题目虽然也是自己解决的，但代码写出来就跟用C\C++写出来的一样。<br>以下为使用函数的解析：<br><code>str.split(separtor,limit)</code>:将字符串转换成数组。separtor是指定分割成元素的字符或正则表达式。<br><code>array.sort(function)</code>:对数组中的元素进行排序，默认排序顺序是按照字母升序。function是用来指定排序顺序的函数。<br><code>str.match(regexp)</code>:在字符串中检索一个或者多个与括号内正则表达式匹配的值。<br><code>array.join(separator)</code>:将数组中的所有元素转换成一个字符串，separator为元素之间的分隔符，此处用空格。</p><h5 id="代码-3"><a href="#代码-3" class="headerlink" title="代码"></a>代码</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">order</span>(<span class="params">words</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> words.split(<span class="string">" "</span>).sort(<span class="function">(<span class="params">word1,word2</span>)=&gt;</span>word1.match(<span class="regexp">/[1-9]/</span>)&gt;word2.match(<span class="regexp">/[1-9]/</span>)).join(<span class="string">" "</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="Where-my-anagrams-at"><a href="#Where-my-anagrams-at" class="headerlink" title="Where my anagrams at?"></a>Where my anagrams at?</h4><h5 id="题目-4"><a href="#题目-4" class="headerlink" title="题目"></a>题目</h5><p>定义两个字符串等价，当且仅当它们拥有的每种字符的个数都相等。<br>问在给定的字符串数组中有多少字符串与给定的字符串word等价。</p><h5 id="题解-4"><a href="#题解-4" class="headerlink" title="题解"></a>题解</h5><p>这题不难，所需函数上文都有。</p><h5 id="代码-4"><a href="#代码-4" class="headerlink" title="代码"></a>代码</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">function anagrams(word, words) &#123;</span><br><span class="line">  word = word.split(&apos;&apos;).sort().join(&apos;&apos;);</span><br><span class="line">  return words.filter(a =&gt; a.split(&apos;&apos;).sort(&apos;&apos;).join(&apos;&apos;) == word);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><p>5.20</p><h4 id="Calculating-with-Functions"><a href="#Calculating-with-Functions" class="headerlink" title="Calculating with Functions"></a>Calculating with Functions</h4><h5 id="题目-5"><a href="#题目-5" class="headerlink" title="题目"></a>题目</h5><p>使用函数计算结果。<br>输入包括两个数字函数和一个符号函数，如<code>one(plus(two()));</code>形式，即要求计算1+1的结果。<br>数字函数代表函数名对应的数字。<br>符号函数代表函数名对应的符号。<br>除法向下取整。</p><h5 id="题解-5"><a href="#题解-5" class="headerlink" title="题解"></a>题解</h5><p>因为这道题目我升到了5kyu<br>这道题其实并不难，用寻常的方法也是可以写的。<br>我再看了别人代码后修改了自己的代码。<br>其实主要的盲点就是函数可以直接返回一个函数。<br>代码不难，模拟一下即可。</p><h5 id="代码-5"><a href="#代码-5" class="headerlink" title="代码"></a>代码</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">zero</span>(<span class="params">Func</span>) </span>&#123;<span class="keyword">return</span> Func?Func(<span class="number">0</span>):<span class="number">0</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">one</span>(<span class="params">Func</span>) </span>&#123;<span class="keyword">return</span> Func?Func(<span class="number">1</span>):<span class="number">1</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">two</span>(<span class="params">Func</span>) </span>&#123;<span class="keyword">return</span> Func?Func(<span class="number">2</span>):<span class="number">2</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">three</span>(<span class="params">Func</span>) </span>&#123;<span class="keyword">return</span> Func?Func(<span class="number">3</span>):<span class="number">3</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">four</span>(<span class="params">Func</span>) </span>&#123;<span class="keyword">return</span> Func?Func(<span class="number">4</span>):<span class="number">4</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">five</span>(<span class="params">Func</span>) </span>&#123;<span class="keyword">return</span> Func?Func(<span class="number">5</span>):<span class="number">5</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">six</span>(<span class="params">Func</span>) </span>&#123;<span class="keyword">return</span> Func?Func(<span class="number">6</span>):<span class="number">6</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">seven</span>(<span class="params">Func</span>) </span>&#123;<span class="keyword">return</span> Func?Func(<span class="number">7</span>):<span class="number">7</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">eight</span>(<span class="params">Func</span>) </span>&#123;<span class="keyword">return</span> Func?Func(<span class="number">8</span>):<span class="number">8</span>;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">nine</span>(<span class="params">Func</span>) </span>&#123;<span class="keyword">return</span> Func?Func(<span class="number">9</span>):<span class="number">9</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">plus</span>(<span class="params">b</span>) </span>&#123;<span class="keyword">return</span> <span class="function">(<span class="params">a</span>)=&gt;</span>a+b;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">minus</span>(<span class="params">b</span>) </span>&#123;<span class="keyword">return</span> <span class="function">(<span class="params">a</span>)=&gt;</span>a-b;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">times</span>(<span class="params">b</span>) </span>&#123;<span class="keyword">return</span> <span class="function">(<span class="params">a</span>)=&gt;</span>a*b;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dividedBy</span>(<span class="params">b</span>) </span>&#123;<span class="keyword">return</span> <span class="function">(<span class="params">a</span>)=&gt;</span><span class="built_in">Math</span>.floor(a/b);&#125;</span><br></pre></td></tr></table></figure><hr><p>5.21</p><h4 id="Simple-Pig-Latin"><a href="#Simple-Pig-Latin" class="headerlink" title="Simple Pig Latin"></a>Simple Pig Latin</h4><h5 id="题目-6"><a href="#题目-6" class="headerlink" title="题目"></a>题目</h5><p>将给定字符串中的每个单词的第一个字母移到末尾，并在末尾加上’ay’。忽略标识符<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pigIt(&apos;Pig latin is cool&apos;); // igPay atinlay siay oolcay</span><br><span class="line">pigIt(&apos;Hello world !&apos;);     // elloHay orldway !</span><br></pre></td></tr></table></figure></p><h5 id="题解-6"><a href="#题解-6" class="headerlink" title="题解"></a>题解</h5><p>感觉这题还是主要考验</p><h5 id="代码-6"><a href="#代码-6" class="headerlink" title="代码"></a>代码</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function pigIt(str)&#123;</span><br><span class="line">  return str.replace(/\b(\w)(\w*)\b/gi,&quot;$2$1ay&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
      <category term="计算机" scheme="http://kxjzxc.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
      <category term="程序" scheme="http://kxjzxc.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E7%A8%8B%E5%BA%8F/"/>
    
      <category term="前端" scheme="http://kxjzxc.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E7%A8%8B%E5%BA%8F/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="前端" scheme="http://kxjzxc.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
  <entry>
    <title>【游戏】Vim adventure之Level1-3</title>
    <link href="http://kxjzxc.github.io/%E3%80%90%E6%B8%B8%E6%88%8F%E3%80%91Vim-adventure%E4%B9%8BLevel1-3.html"/>
    <id>http://kxjzxc.github.io/【游戏】Vim-adventure之Level1-3.html</id>
    <published>2019-05-08T09:08:41.000Z</published>
    <updated>2019-05-10T10:47:33.857Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><h4 id="关于Vim-adventure"><a href="#关于Vim-adventure" class="headerlink" title="关于Vim adventure"></a>关于Vim adventure</h4><p>Vim adventure是一款用于学习Vim的网页游戏，你也可以直接把它当作一个Vim教程。<br>至于Vim，以下是百度百科中的介绍：</p><blockquote><p>Vim是从 vi 发展出来的一个文本编辑器。代码补全、编译及错误跳转等方便编程的功能特别丰富，在程序员中被广泛使用，和Emacs并列成为类Unix系统用户最喜欢的文本编辑器。</p></blockquote><p>当我在知乎上看到这款游戏时，便萌生出了极大的兴趣。毕竟在我不断接触Linux的过程中，Vim的大名可是常常出现在各类文章中。如今有这么一款寓教于乐的游戏，自然让我有些兴奋。<br>所以在一个稍微有些空闲的下午，我在浏览器上打开了这款游戏:<a href="https://vim-adventures.com/" target="_blank" rel="noopener">Vim adventure</a></p><h4 id="游戏攻略"><a href="#游戏攻略" class="headerlink" title="游戏攻略"></a>游戏攻略</h4><h5 id="Level-1"><a href="#Level-1" class="headerlink" title="Level 1"></a>Level 1</h5><p>刚进入游戏，你是一个阴影光标，正处在四个字符<code>h</code>,<code>j</code>,<code>k</code>,<code>l</code>中间。<br><code>h</code>,<code>j</code>,<code>k</code>,<code>l</code>代表着控制光标移动的四个方向键，其中<code>h</code>为左,<code>j</code>为下,<code>k</code>为上,<code>l</code>为右。当然你也可以直接使用键盘上的方向键，Vim中也是支持的。只不过这需要将你的手从字母键盘上移开，会降低流畅感。所以选择用哪个还需要玩家自己斟酌。<br><img src="Level 1-1.png" alt><br>现在，我们学会了移动自己的光标。当我们将光标移到人物的位置的时候，屏幕上便会出现人物的提示。第一个人物并没有给出什么重要的信息，只是表示欢迎而已。</p><p>那么接下来就让我们进入迷宫当中。<br><img src="Level 1-2.png" alt><br>迷宫的作用我想是为了让玩家更好地熟练关于方向键的使用。迷宫中有两个人物，一个是告诉我们关于help的使用，即<code>:help</code>加上想要查询的按键，即可得到信息。另一个人物则是告诉玩家需要去找<code>w</code>,<code>e</code>,<code>b</code>，三个按键。这个游戏中的按键不是一开始都能用的，除了<code>h</code>,<code>j</code>,<code>k</code>,<code>l</code>,<code>:</code>这五个字符之外的其他按键都是需要玩家自己去寻找。迷宫里右上角的宝箱暂时无法碰到，此时暂且忽略不计。另一个宝箱其实就是相当于障碍物，玩家必须获得钥匙才能通过。</p><p>走出了迷宫，在接下来的地图中玩家会发现自己被单向地图块所阻挡。<br>此时根据人物的提示，我们可以知道，当下一行的长度小于所在行时，直接向下会到下一行的最后一格，一直到大于等于最初那行长度的一行时，才会回到原先那一列。根据这个性质，我们在以下三个位置按上下键即可通过。<br><img src="Level 1-3.png" alt></p><p>当我们移到最后一个人物处，按下ESC键后即可迎来第二关。</p><h5 id="Level-2"><a href="#Level-2" class="headerlink" title="Level 2"></a>Level 2</h5><p>Level2中，我们可以获取<code>w</code>,<code>e</code>,<code>b</code>三个按键。<br><code>w</code>:到下一个单词的第一个字母。<br><code>e</code>:到下一个单词的最后一个字母<br><code>b</code>:到上一个单词的第一个字母<br>注意以上三个热键中标点也算是单独一个单词。<br>通过这三个热键，我们就可以轻松到达被石头阻挡的地方。不过这时还是无法解决前面那个难题的，因为石头下面也压着一个感叹号。<br>当我们通过这三个新技能拿到钥匙，就可以来到第三关了。<br><img src="Level 2.png" alt></p><h5 id="Level3"><a href="#Level3" class="headerlink" title="Level3"></a>Level3</h5><p>第三关的第一个谜题是名为Bugs的邪恶势力在预言上添加了一些字符，即红框框起来的部分，需要玩家删掉这些字符。<br>这个时候我们是没办法解决这个谜题的，所以先跳过去。<br>不过谜题上的<code>B</code>按键我们可以先领取过来。<br><code>B</code>:到上一个单词的第一个字母，此处的单词是指被空格分开的字符串。<br>有了这个案件前面的难题就可以解决了。不过别急，我们还没有拿到宝箱的钥匙。<br>第三关的第二个谜题考验的是对于<code>w</code>与<code>e</code>的理解，玩家需要通过这两个按键到达最终点拿到按键<code>x</code>。不过这个谜题是限时30秒完成目标，否则会被传送回谜题外。玩家其实可以通过来回按<code>w</code>与<code>e</code>键以达到快速通关的目的。<br><img src="level 3-2.png" alt><br><code>x</code>:删除光标所在位置的字符。<br>有了<code>x</code>我们就可以完成第一个谜题，并且获得宝箱钥匙。<br>最后回到第一关打开宝箱，完成前三关。</p><h5 id="后续"><a href="#后续" class="headerlink" title="后续"></a>后续</h5><p>不幸的是，这个游戏只有前三关是免费玩的。若还想玩后续关卡，则需花25美金（折合人民币大约200元），可以玩六个月。作为没钱的学生狗，这个游戏的教程恐怕就到此为止了。<br>不过说实话，这款游戏对于Vim热键的掌握还是非常有帮助的，若是不缺这钱又苦于Vim热键不习惯的人不妨买来玩玩。</p>]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
      <category term="游戏" scheme="http://kxjzxc.github.io/categories/%E6%B8%B8%E6%88%8F/"/>
    
    
      <category term="游戏" scheme="http://kxjzxc.github.io/tags/%E6%B8%B8%E6%88%8F/"/>
    
      <category term="Linux" scheme="http://kxjzxc.github.io/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>读书、桌游与五月的雨</title>
    <link href="http://kxjzxc.github.io/%E8%AF%BB%E4%B9%A6%E3%80%81%E6%A1%8C%E6%B8%B8%E4%B8%8E%E4%BA%94%E6%9C%88%E7%9A%84%E9%9B%A8.html"/>
    <id>http://kxjzxc.github.io/读书、桌游与五月的雨.html</id>
    <published>2019-05-07T15:16:05.000Z</published>
    <updated>2019-05-09T15:18:56.752Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script>    <div id="aplayer-wIrjtmfG" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="5085857" data-server="netease" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#555"></div><p>我的五一过得相当颓废。<br>整整四天的假期时光仿佛是一笔承诺的财富，如约地交到了我这个挥霍无度的穷人手中。尽管四天看起来很多，但对于我而言是远远不够，不一会就被安排得明明白白。由于繁忙的考试周与与自己的拖延症，待办事项如同滚雪球般越滚越大，至五一期间已堆积成令人叹息的模样。因此这难得的长假对我而言也只能是在堆积的事务中稍稍喘口气。<br>然而，作为毫无自控力可言的拖延症患者，这一笔诱人的财富能用百分之五十用在原计划上我就心满意足，足以自傲了。事实上的确如此，原定一天内解决的近代史纲要的论文在互联网与漫画的诱惑下硬生生地被拖延到第三天晚上才勉强完成，导致原本时间充裕的大学计算机复习时间被大大缩减。项目什么的更是丝毫未动，当真令人羞愧。幸好我原先也算是有些许自知之明，没有把两门数学课的复习列入计划内，不至于让自己焦头烂额。</p><hr><p>近代史纲要的论文题目是自己的家族史。一开始听到这题目，其实我是拒绝的，毕竟像咱这世世代代农民出身的家族能有什么值得记载的历史呢？但是作业毕竟是作业，作为学生还是得老老实实地做。所幸，老师的要求并不高，只需要讲讲几代人的生活即可，没有什么考据等专业性要求。这意味着就算是瞎编讲故事也无妨，我爸也觉得我随便编一下就行。可惜阅历极浅的我对于那段时间的了解并不多，根本无法胡编乱造。所以最后还是花了大把时间向我的父母询问那段“毫不起眼”的历史。虽然最初只是把这个作业当做一个麻烦，但是随着对自己家族故事的深入了解，我却愈发地感兴趣了。解放战争、共产党、人民公社、文化大革命、改革开放……当这些从小到大都在学的熟悉名词遇上了自己身边的亲人时，一种奇妙的历史参与感便油然而生。第一次感到，那些熟悉的历史事件与自己是多么的接近。当真是任何一个人的人生都是一个时代的缩影啊。<br>虽然写论文花了多余预想两三倍的时间，但实际上还是有一天左右的复习时间的。加上原先约于第四天早上的乒乓球也因为球场装修而改了日子，按理来说还是非常充裕的。但是我向来不是一个讲理的人。持着计划制定出来就是为了打破的原则，我成功在漫画的怀抱中“荒废”了一个早上加半个下午，成功将复习时间压缩了一半。我可以毫无底气地宣称，这不过是为了将时间更加有效率地使用的一种策略，一切都在我的计划中。说实话，大学计算机课我这学期基本上是没有听过的。课程本身无趣，老师讲得也无聊，加上有一部分内容也都了解过，我是根本没有听课的欲望。每节课刷刷手机，写写作业(并没有)就这样浪过去。作业偶尔认真写一下，基本上没学到什么东西。复习的时候我连思维导图都懒得做，边看上课的PPT边写配套的习题，一章一章的地翻过去就当自己复习完了。至于SQL，我试着在codewars上写了几题，结果一道都没写出来，果断放弃以防打击自己的信心。还好5月5号的考试并不是特别的难，除了题型让我大吃一惊以及SQL依旧懵逼外都还好。成绩至今未出，但不出意外，及格还是能够的。</p><hr><p>虽然这四天在学习上我的确颓废得很，但其实生活还是充实得像一般大学生活。介于5月8号又到了还书的日子，而我手上那本借来）两个月左右的《爵士乐时代的故事》尚有三篇未读，所以第一天早上就坐在大寝室的客厅里看看书做做笔记。看完书自然是要写书评，趁着刚刚读完，下午就顺便写写书评。然而想起上次那篇《骆驼的后背》还咕着，创意写作课的总结也忘了写，顿时感到任务重了好多。边写边浪着，直到第二天早上才写完。第四天早上才有时间去还了书，相应的又借来一本石黑一雄的《别让我走》。看书的时间固然少，但书不可不看，要不然又会陷入浅薄的思维沼泽，难以挣脱。不过想着六级考试也快到了，我也该看看手头那本英文版的《傲慢与偏见》。</p><p>第二天的下午和社团里约好玩桌游。其实我一直很期待玩桌游，尤其想试一试跑团。第一次知道跑团是在17年的十月番《如果有妹妹就好了》里面。我是很喜欢这部番的。尽管它并没有什么值得一提的剧情，也没有特别令人印象深刻的人物，制作方面平平常常，属于那种看着很有意思，但基本上没有安利价值的番剧，但是我却被这部动画所吸引着。因为这部动画描绘了我最渴望的生活状态——一间自己的房子，一屋子游戏书籍，友人常常造访，所遇大多有趣的灵魂……这是何尝令人羡慕的生活状态。所以这也成了我的理想之一。在我的理想生活中，桌游是必不可少的东西，毕竟是朋友聚会，居家旅行的必备品。因此在社里分出桌游分社时，我满怀欢喜地加入了，算是借此道踏入这个圈子。五月二号的下午是我第一次参加社里的桌游活动。由于人数多的原因，并没能跑团，而是玩了三个我从未玩过的桌游游戏——《爆炸猫》《推翻苏丹》《犯罪现场》。我比较喜欢《爆炸猫》，简单，有趣，刺激，流程也短。相比之下，后两者比较烧脑，需要各种推理，《犯罪现场》还需要两次连着抽到凶手的我来演戏，着实费劲。演戏的确是很累的事情，不仅要假装侦探推理，还得用最自然的方式误导侦探，每次一指到正确的红白牌我都会紧张一阵子。两次凶手都是输了，剩下一次侦探也完全没有表现的余地，可惜可惜。将整整一个清闲且充裕的下午献祭给桌游，我感到自己的san值逐渐回满。向桌游社的诸位道别后，我又到荷园吃了一锅物美价廉的麻辣香锅，然后心满意足地回到寝室。</p><p>我计划是第三天下午出门，毕竟是难得的长假，即便我是一个死宅，也不愿意一直呆在宿舍里发霉。而那天上午却下起了小雨。五一这几天一直是阴雨天气，天空灰蒙蒙的一片，绵长的雨丝时不时地飘落，让人在撑伞与不撑伞之间纠结。偶尔雨大了，淅淅沥沥地下一小会儿，不平整的地上又出现了大大小小的水洼。我讨厌在雨天出门，一是不愿意走满是水洼的道路，而是撑着雨伞总感觉极不方便。所以我有点担心这雨会一直下到午后，心想着若真是下一天的雨，我就索性窝在宿舍里看漫画。这两天沉迷于水上悟志老师的作品，一口气看完了《魂环》和《惑星公主与蜥蜴骑士》，还是意犹未尽。<br>不过雨很快就停了，到了下午地也差不多干了。我打算去红树林公园走一遍那条有名的海岸线。坐公交车发现途经华侨文化创意园，于是顺道去了一趟。去年十二月我去过一次创意园，但那时只是随便逛逛，走过著名的B10现场门口，然后到独立动画展览的会场里走了一圈，感觉不到什么趣味，便去看附近的马拉松比赛了。后来才意外得知此处的旧天堂书店小有名气，于是趁此机会决定去店里看看。<br>出乎我意料的是，创意园那天刚好有个小集市一般的展会。我满怀兴致地一个摊位一个摊位地看过去，发现了不少有意思的东西——木制的茶具、有些年代的瓷杯、自家蒸馏的香精……各种各样充满文艺气息的物品，让人眼花缭乱。有一个摊位摆满了各种各样奇奇怪怪的魔方，两位摊主坐在计时器前专心致志地转着手中的魔方；另一个卖画的摊位上有一个孩子用马克笔画着精致复杂的空中楼阁。还有一家展示旧杂志旧报纸的摊位上摆着一架现在很少见到的电唱机，让曾经写过关于留声机论文的我心生亲切。<br><img src="魔方.jpg" alt><img src="铜镜.jpg" alt><br><img src="电唱机.jpg" alt><br>逛了一圈摊位，我便找那家旧天堂书店。书店很有那种怀旧悠闲的氛围，昏黄的灯光、拥挤却整齐的书籍、老旧的机器……我进门时店里放着旧式的摇滚乐，一曲结束后有放了一首有点迷幻味道的音乐。店里的书都很有意思，充满了文化感。但不同于其他书店，这家书店最令我感兴趣的还是其陈列的音乐专辑和黑胶唱片：Jazz,Rock,Funk……看着这些承载上世纪荣光的小盒子，我感到无比兴奋。虽然我基本上看不太懂，但是我还是傻里傻气地一个一个看过来，内心期待这能有一张自己听过的专辑或者唱片。<br>书店的照片我虽照了一张，但事后才发现自己拍糊了，所以只能用其他地方的照片替代。希望以后能有机会再照一张。<br><img src="雕塑.jpg" alt><img src="酒瓶.jpg" alt><img src="壁画.jpg" alt><br>离开了创意园后，我继续朝着红树林前进。这次的公交车下站点正好在红树林公园的对面，欢乐海岸的门口。因为是我独自一人的出游，所以行程也比较随意。我就到欢乐海岸外面的广场上逛了逛。也许是五一的缘故，广场上的人很多，大部分是一家人整整齐齐地来到此地游玩。那些孩子们在起伏的喷泉旁玩耍，而他们的爷爷奶奶，爸爸妈妈则在一旁面带笑意地看着。广场旁有一座造型奇特的建筑，我走近一看，原来是大疆的旗舰店。由于学校与专业的缘故，我常常能听到大疆的名号。此时看见他家的旗舰店，自然也好奇地走进去看看。店里展示着许多不同型号的无人机，还有看上去就有高科技感的摄影机器。我照旧是不懂装懂地看了一遍，就退了出来。门口有一架小型的无人机翱翔在人群上空，仿佛一只新生的飞鸟。<br><img src="欢乐海岸.jpg" alt><br><img src="大疆.jpg" alt><br>通过地铁站穿越马路，我总算来到了最初的目的地——红树林公园。人很多，灰蒙蒙的天空下五颜六色的一片。这是我的第一印象。我觉得自己应该挑一个非节假日的晴天来此地。所谓海岸，其实和我家乡那边的滩涂差不多模样，由于是阴天的缘故，似乎有些压抑的感觉。公园倒像是我曾经去过的西湖畔，一路上全是行人。近年来，穿汉服的小姐姐似乎越来越多，大家也都愿意来到人群中间展现自己的风采，以至于我一路上看到不少穿着汉服的小姐姐（应该是小姐姐吧），让我一度疑心周围有什么漫展。海边的道路很长，我听着耳机内的音乐，嗅着海风中咸湿的气息，望着广阔的天地、来往的行人，心情惬意得像是踩在棉花上流畅地跳着华尔兹。<br><img src="红树林.jpg" alt></p><hr><p>五一四天的假期在我颓废而又充实的生活中结束了，繁忙的学业生活又将来临。虽然我依旧是犯了严重的拖延症，不过好歹也算是完成了预定的计划。希望接下来的五月里，我能迎来更加充实的生活吧。</p>]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
      <category term="杂" scheme="http://kxjzxc.github.io/categories/%E6%9D%82/"/>
    
    
      <category term="杂" scheme="http://kxjzxc.github.io/tags/%E6%9D%82/"/>
    
  </entry>
  
  <entry>
    <title>关于播放音乐的二三事</title>
    <link href="http://kxjzxc.github.io/%E5%85%B3%E4%BA%8E%E6%92%AD%E6%94%BE%E9%9F%B3%E4%B9%90%E7%9A%84%E4%BA%8C%E4%B8%89%E4%BA%8B.html"/>
    <id>http://kxjzxc.github.io/关于播放音乐的二三事.html</id>
    <published>2019-05-05T15:18:17.000Z</published>
    <updated>2019-05-06T14:30:51.879Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>这篇文章我主要是想写写我在听音乐过程中所遇到的一些问题。感觉写成好几篇文章太过于麻烦，所以我索性全写到一篇文章中，以后若是遇到自然也会在此文章中更新。<br>以下是本文的内容所涵盖的几点：</p><ul><li>Linux里firefox无法播放音乐</li><li>网易云音乐付费音乐免费下载</li><li>Hexo博客添加音乐</li></ul><hr><h4 id="ubuntu里firefox无法播放音乐"><a href="#ubuntu里firefox无法播放音乐" class="headerlink" title="ubuntu里firefox无法播放音乐"></a>ubuntu里firefox无法播放音乐</h4><p>我在ubuntu环境下时一般使用RhythmBox播放本地音乐，而且也很少在此环境下看视频，所以我很少用浏览器播放音频和视频。但是有时候是必须用到浏览器播放，就像是下文所讲的下载付费音乐。然而当我第一次在ubuntu的firefox上打开网易云音乐网页版播放音乐时却发现无法播放。网上一查，大抵上是解码器不支持的缘故。幸运的是这个问题也好解决，安装个解码器即可。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install ubuntu-restricted-extras</span><br></pre></td></tr></table></figure></p><hr><h4 id="网易云音乐付费音乐免费下载"><a href="#网易云音乐付费音乐免费下载" class="headerlink" title="网易云音乐付费音乐免费下载"></a>网易云音乐付费音乐免费下载</h4><p>这个方法只对可以在网页端听的音乐有用。</p><ol><li>进入歌曲页面，按下F2查看元素。<br><img src="Download1.png" alt></li><li>点击<code>网络</code>(network)，并且选择<code>媒体</code>(media)，然后按ctrl+R重新载入。<br><img src="Download2.png" alt></li><li>在ubuntu中，选择大小最大的那一项，即上述图片中的第二项。右键，点击<code>新建标签页打开</code>，然后切换到新生成的页面中。<br><img src="Download3.png" alt><br>在windows中，需要先播放音乐，然后再选择大小最大的那一项，双击并切换得到新生成的页面中（也可能是浏览器的原因，我两个系统的浏览器不同）。</li><li>右键中间的进度条，点击<code>另存音频为</code>，即可保存歌曲。windows</li></ol><hr><h4 id="Hexo博客中添加音乐"><a href="#Hexo博客中添加音乐" class="headerlink" title="Hexo博客中添加音乐"></a>Hexo博客中添加音乐</h4><h5 id="使用音乐平台提供的外链"><a href="#使用音乐平台提供的外链" class="headerlink" title="使用音乐平台提供的外链"></a>使用音乐平台提供的外链</h5><p>以网易云音乐为例：</p><ol><li>进入所需歌曲的页面，点击<code>生成外链播放器</code>。<br><img src="Blog1.png" alt></li><li>一般添加的是iframe标签，调节完尺寸和播放模式后，复制最低端的HTML代码，添加到自己的博客文章中。<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">frameborder</span>=<span class="string">"no"</span> <span class="attr">border</span>=<span class="string">"0"</span> <span class="attr">marginwidth</span>=<span class="string">"0"</span> <span class="attr">marginheight</span>=<span class="string">"0"</span> <span class="attr">width</span>=<span class="string">330</span> <span class="attr">height</span>=<span class="string">86</span> <span class="attr">src</span>=<span class="string">"//music.163.com/outchain/player?type=2&amp;id=19892244&amp;auto=0&amp;height=66"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ol><p>效果如下：</p><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=2&id=19892244&auto=0&height=66"></iframe><h5 id="使用aplayer播放"><a href="#使用aplayer播放" class="headerlink" title="使用aplayer播放"></a>使用aplayer播放</h5><p>上述引用音乐平台外链的方法可以说是非常的方便了，只要获取代码添加一下即可。<br>然而对于一些老爵士、老摇滚和其他有版权保护的音乐是没办法添加外链的。<br><img src="Blog2.png" alt><br>网上虽然有如何获取这些歌曲外链的方法，但是我试过两次后，发现只能出现播放器，却无法播放。所以为了一劳永逸，我选择使用aplayer。<br>aplayer是一款音乐播放插件，即html5的嵌入式播放器，只要有歌曲的id即可。</p><ol><li><p>安装aplayer插件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-tag-aplayer</span><br></pre></td></tr></table></figure></li><li><p>使用MetingJS</p><blockquote><p>MetingJS 是基于Meting API 的 APlayer 衍生播放器，引入 MetingJS 后，播放器将支持对于 QQ音乐、网易云音乐、虾米、酷狗、百度等平台的音乐播放。</p></blockquote></li></ol><p>上述是从别人博客里引用的关于MetingJS的介绍以及功能。<br>使用MetingJS需要在根目录下的<code>_config.yml</code>文件中添加以下语句：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">aplayer:</span><br><span class="line">  meting: true</span><br></pre></td></tr></table></figure></p><ol start="3"><li>添加代码<br>准备工作完成了，接下来你只需要在你想加音乐的博客文章中添加以下代码即可：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;% meting &quot;3880720&quot; &quot;netease&quot; &quot;song&quot; &quot;theme:#555&quot; &quot;mutex:true&quot; &quot;listmaxheight:340px&quot; &quot;preload:auto&quot; %&#125;</span><br></pre></td></tr></table></figure></li></ol><p>效果如下：<br>    <div id="aplayer-jnBEbjKY" class="aplayer aplayer-tag-marker meting-tag-marker" data-id="3880720" data-server="netease" data-type="song" data-mode="circulation" data-autoplay="false" data-mutex="true" data-listmaxheight="340px" data-preload="auto" data-theme="#555"></div><br>其中3880720是歌曲的id，可以在该歌曲页面的网址中找到。</p><p>这份代码中的各个参数配置如下：</p><table><thead><tr><th>选项</th><th style="text-align:center">默认值</th><th style="text-align:left">描述</th></tr></thead><tbody><tr><td>id</td><td style="text-align:center">必须值</td><td style="text-align:left">歌曲/专辑/歌单对应的id</td></tr><tr><td>server</td><td style="text-align:center">必须值</td><td style="text-align:left">音乐平台：netease(网易云音乐)、tecent(qq音乐)、xiami(虾米音乐)、kugou(酷狗音乐)、baidu(百度音乐)</td></tr><tr><td>type</td><td style="text-align:center">必须值</td><td style="text-align:left">请求类型：song(单曲)、album(专辑)、playlist(歌单)、search(搜索)、artist(歌手)</td></tr><tr><td>theme</td><td style="text-align:center">#ad7a86</td><td style="text-align:left">播放器风格色彩设置</td></tr><tr><td>fixed</td><td style="text-align:center">false</td><td style="text-align:left">开启固定模式</td></tr><tr><td>mini</td><td style="text-align:center">false</td><td style="text-align:left">开启迷你模式</td></tr><tr><td>loop</td><td style="text-align:center">all</td><td style="text-align:left">列表循环模式：all, one,none</td></tr><tr><td>order</td><td style="text-align:center">list</td><td style="text-align:left">列表播放模式： list(顺序播放), random(随机播放)</td></tr><tr><td>volume</td><td style="text-align:center">0.7</td><td style="text-align:left">播放器音量</td></tr><tr><td>lrctype</td><td style="text-align:center">0</td><td style="text-align:left">歌词格式类型</td></tr><tr><td>listfolded</td><td style="text-align:center">false</td><td style="text-align:left">指定音乐播放列表是否折叠</td></tr><tr><td>storagename</td><td style="text-align:center">metingjs</td><td style="text-align:left">LocalStorage 中存储播放器设定的键名</td></tr><tr><td>autoplay</td><td style="text-align:center">true</td><td style="text-align:left">自动播放，移动端浏览器暂时不支持此功能</td></tr><tr><td>mutex</td><td style="text-align:center">true</td><td style="text-align:left">该选项开启时，如果同页面有其他 aplayer 播放，该播放器会暂停</td></tr><tr><td>listmaxheight</td><td style="text-align:center">340px</td><td style="text-align:left">播放列表的最大长度</td></tr><tr><td>preload</td><td style="text-align:center">auto</td><td style="text-align:left">音乐文件预载入模式，可选项： none, metadata, auto</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
      <category term="教程" scheme="http://kxjzxc.github.io/categories/%E6%95%99%E7%A8%8B/"/>
    
    
      <category term="Blog" scheme="http://kxjzxc.github.io/tags/Blog/"/>
    
  </entry>
  
  <entry>
    <title>【读书】爵士乐时代的故事</title>
    <link href="http://kxjzxc.github.io/%E3%80%90%E8%AF%BB%E4%B9%A6%E3%80%91%E7%88%B5%E5%A3%AB%E4%B9%90%E6%97%B6%E4%BB%A3%E7%9A%84%E6%95%85%E4%BA%8B.html"/>
    <id>http://kxjzxc.github.io/【读书】爵士乐时代的故事.html</id>
    <published>2019-05-01T16:17:47.000Z</published>
    <updated>2019-05-02T04:00:55.618Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>《爵士乐时代的故事》我从图书馆结果来历经两个月方才读完。主要还是平常看书的时间太少，在加上一开始心太野，想给每一篇短篇小说都分析一遍。后来终于发现自己并没有那么多的精力，所以最终只是写了两篇小说的分析。</p><p>我很喜欢这部作品。菲茨杰拉德的文笔非常的华丽、精致，所描述的场景极其富有画面感，很容易让人的脑海中浮现出那个繁华、放纵、娱乐至上的爵士乐时代。无论是《牛皮糖》和《骆驼的后背》中所描述的舞会场景，还是《幸福与辛酸》和《治心人》中描绘的年轻人的生活，都让人惊叹不已。他对于每个人物的情感刻画也是有声有色，行为逻辑、语言风格、内心活动……自然、合理，菲茨杰拉德笔下的人物似乎源于一个个活生生的人类，凭着自己的意愿活在这些小说所描绘的世界中。我想这必须是要有一定的阅历才能表现出来的文字，而我如今无论是阅历上还是文字功夫上都是远远不足。</p><p>我向来认为，一篇短篇小说就是一件精致的艺术品。它不必向长篇那样光是构思大纲便已经很累，却也不想诗歌那般字字句句都得斟酌。短篇小说的精妙在于其精巧的结构与精炼的文字。毫无疑问，这两点菲茨杰拉德先生都非常的擅长。虽然我只是具体分析了《牛皮糖》和《骆驼的后背》两篇故事，但是其完整精致的结构却给我留下了深刻的印象。每一部分都不多余，每一部分都不可缺失，阅读节奏也是恰到好处。每篇小说都想是一个流畅的主体，前文包含着后文的内容，后文也呼应着前文的剧情，无论那一段都不可分割出来。反观我自己所写的那部《深夜派对》，尽管设定我是非常喜欢，但也正如路学姐所说，现实与幻象部分感觉被割裂成两个独立的个体，如果单独把幻象拿出来似乎也不成问题。我想如果将来有时间的话，我还是想多分析菲茨杰拉德的短篇小说。</p><p>其实这篇短篇小说集最令我惊叹的，还是其中所描绘的内容。这本小说集是1922年开始出版的，也就是说这篇小说集中的大多数短篇都是上个世纪二十年代的成品，距今差不多也有百年时光。然而，百年之后的我去阅读这本小说集的时候，却惊讶地发现，他虽写的是百年前的年轻人的生活状态，却与当今现状如出一辙。</p><p>《牛皮糖》中游手好闲、虚度光阴的吉姆与追求自由独立的现代女性形象南希在我们的日常生活中随处可见。《骆驼的后背》中男女主之间关于是否结婚的矛盾也是如今屡见不鲜。<br>《热血与冷血》中在过于热心与过于冷漠之间徘徊的马瑟简直就是我本人的写照，也是现代人经常面临的道德困境。每当我走过乞丐的旁边，强硬地压抑住内心的同情与愧疚，无视其可怜可悲有时甚至可恨的姿态，拒绝施舍自己的善意时何尝不是那么的纠结困扰。甚至不要说是乞丐，便是不得已拒绝相识之人的请求也会让我困扰一阵。如何在热心与冷漠之间平衡，真的是一个问题。<br>《格雷琴的四十次眨眼》中的奋斗家罗杰的经历，虽然与如今的996本质上不同，但是那种为追求幸福疯狂工作而导致自己本人的情感生活与身体健康临近崩溃的描写简直是现代人的真实写照。哪怕是为了自己的理想而奋斗，这种近乎献祭的工作方式也会令人反思。<br>《治心人》所讲的是年轻夫妻之间的婚姻矛盾。一开始我以为这应该是两个人之间价值观的不切合，才导致如今这种感到厌烦的局面。而后来，我渐渐明白，这是两个人尚未理解生活的真相，尚未明白婚姻的真相，无法适应新的，他们应该面对的生活的结果。这样的矛盾以丈夫的生病为爆发点疯狂激化，使得他们原先那种勉强维持的日常生活瞬间崩塌，成为一堆难以处理的废墟。所幸在心理医生的帮助下，两个人都成熟了许多，明白婚姻是怎样的一回事。这些日子我常常能在知乎上看到一些关于爱情，关于婚姻的问题，有些人是认为三观不合的缘故，但也有人指出是两人都没能包容对方的想法所导致的。我不得不承认，现实中的大多数矛盾都是源于后者。一个人在生活中很难找到兴趣三观完全符合的友人，而且还要是异性，这就更加困难。两个人在一起过于亲密，那么必定会有许许多多的矛盾之处，只有接受这些不同，相互理解，求同存异，生活才会更加和谐。另外一点就是现代人果然还是需要心理医生，定期地去检查心理健康还是非常重要的。<br>《“哦，赤褐色的女巫”》中的“卡罗琳”在全篇小说中可以说是一个理想的令人痴迷的女性形象。与其把她这个形象单纯认为是一个“女神”，我更愿意将她作为一种理想事物的隐喻——理想伴侣、理想生活、理想工作或者说青春、梦想、激情……那时所有人都渴望得到的，想要追求的东西。但是大多数人更像是默林·格兰杰，作为一个平庸的人“单相思”着自己的幻想，却又不得不在为主流的平凡的生活而奋斗。毕竟那样的生活才是我们的现实，那样的幻想只能想想。而在小说的结尾，老默林知道了这一切的真相后，幻想破碎，其中未必没有些许讽刺的意味——也许我们所向往的不过是自己的幻想，有时候也只是自我感动罢了。<br>《幸福的辛酸》所讲的两对夫妻，两场以悲剧收场的婚姻，一个因为天灾，一个因为人祸，倒也令人叹息。<br>《返老还童》这篇小说很有意思，也曾经被改编成一部叫做《本杰明·巴顿奇事》的电影。而《齐普赛街的塔奎》这篇虽说精彩，但其实我也没怎么看懂。</p><p>我想人类的烦恼与苦闷是跨越时间，跨越地理的，无论是哪个时代的人都遇见的相同的烦恼。正如《传道书》中所写：</p><blockquote><p>传道者说：虚空的虚空，虚空的虚空，凡事都是虚空。人一切的劳碌，就是他在日光之下的劳碌，有什么益处呢？一代过去，一代又来，地却永远长存。日头出来，日头落下，急归所出之地。风往南刮，又向北转，不住地旋转，而且返回转行原道。江河都往海里流，海却不满；江河从何处流，仍归还何处。万事令人厌烦，人不能说尽。眼看，看不饱；耳听，听不足。已有的事后必再有；已行的事后必再行。日光之下并无新事。</p></blockquote>]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
      <category term="小说阅读" scheme="http://kxjzxc.github.io/categories/%E5%B0%8F%E8%AF%B4%E9%98%85%E8%AF%BB/"/>
    
      <category term="短篇小说" scheme="http://kxjzxc.github.io/categories/%E5%B0%8F%E8%AF%B4%E9%98%85%E8%AF%BB/%E7%9F%AD%E7%AF%87%E5%B0%8F%E8%AF%B4/"/>
    
      <category term="菲茨杰拉德" scheme="http://kxjzxc.github.io/categories/%E5%B0%8F%E8%AF%B4%E9%98%85%E8%AF%BB/%E7%9F%AD%E7%AF%87%E5%B0%8F%E8%AF%B4/%E8%8F%B2%E8%8C%A8%E6%9D%B0%E6%8B%89%E5%BE%B7/"/>
    
    
      <category term="小说阅读" scheme="http://kxjzxc.github.io/tags/%E5%B0%8F%E8%AF%B4%E9%98%85%E8%AF%BB/"/>
    
      <category term="短篇小说" scheme="http://kxjzxc.github.io/tags/%E7%9F%AD%E7%AF%87%E5%B0%8F%E8%AF%B4/"/>
    
      <category term="菲茨杰拉德" scheme="http://kxjzxc.github.io/tags/%E8%8F%B2%E8%8C%A8%E6%9D%B0%E6%8B%89%E5%BE%B7/"/>
    
  </entry>
  
  <entry>
    <title>我的第一次创意写作课</title>
    <link href="http://kxjzxc.github.io/%E6%88%91%E7%9A%84%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%88%9B%E6%84%8F%E5%86%99%E4%BD%9C%E8%AF%BE.html"/>
    <id>http://kxjzxc.github.io/我的第一次创意写作课.html</id>
    <published>2019-05-01T13:54:26.000Z</published>
    <updated>2019-05-05T09:48:18.480Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>第一次了解创意写作是我高中时候的事情了。<br>那时候热衷于写小说，却苦于时间精力与技术上的不足。因此我特意去家乡本地的图书馆里找关于写作的书籍。然后那本叫做《成为作家》的书便出现在了我眼前。我向来是个羞涩的人，对于自己写小说的爱好也很少诉诸他人。而对于这类书名如此“露骨”的书籍，我更是不愿意借的，一来怕是无用的商业之作，二来受不了他人的询问。然而当我翻看此书时，内心动摇了。不得不承认，此书中所写的内容正是我所需要的东西。我正面临的困境，我所向往的形象，我所缺失的训练……里面的字字句句无不直扣我的内心。经过一番犹豫之后，我借了这本书，还有另外一本《开始写吧 虚构文学创作》。这两本书恰好属于国内引进的创意写作书系。</p><blockquote><p>创意写作是这样一种写作，它以一种具有想象力的、通常是独特的又赋有诗意的方式表达作者的思想和情感。”<br>写作是个人自由的一种形式。它能使我们从周围所见到的公众性中解放出来。作者最终所写的不是某种文化下的草莽英雄（outlaw heroes），而最主要的是想拯救自己，保存个性。</p></blockquote><p>高中毕业后，我上了一所工科大学。按理说在这样的大学里，即使是文理通识课也是与这种训练课无缘的，至少不会面向理工科学生。然而大一下学期的文理通识选课中却出现了“创意写作”这四个字，而且与我繁多的必修课没有丝毫冲突。毫不犹豫地，我选择了它。</p><p>上课的老师是一个非常有名的老先生——杨争光老师。</p><blockquote><p>杨争光，深圳市第四届政协委员。一级作家，影视编剧，深圳市文联副主席。1957年生于陕西省乾县，1982年毕业于山东大学中文系，长期从事诗歌、小说、影视剧写作。著有《土声》、《南鸟》、《老旦是一棵树》、《黑风景》、《棺材铺》、《从两个蛋开始》等小说，担任电影《双旗镇刀客》编剧，电视连续剧《水浒传》编剧之一，《激情燃烧的岁月》的总策划。</p></blockquote><p>老先生很是友好，上课也是近于一种聊天的形式。虽然由于我们这些大学生糟糕至极的阅读量与内向的举止，大多时候都是老师在说。<br>杨老师拥有很强的人文关怀，他的很多思想都能引发我的思考，并且让我认识到自己的不足。老师再次让我意识到了自己对于人性，对于爱，对于诸多人生命题的理解上的缺陷，以及对于高中时所陷入的功利主义的思考。虽然凭着当前的阅历大多思考都是无用功，但是我又因此重拾那些因高考而舍弃的“无用之书”。就是凭这一点，我上这门课也是有收获了。</p><p>由于我们的阅读量不够，所以讲课的素材是老师选定的五部电影——《郎读者》《肖申克的救赎》《阿甘正传》《贫民窟的百万富翁》《泰坦尼克号》。都是曾经得到过奥斯卡奖且广为流传的经典电影。虽然其中大部分都看过，但是老师还是会要求我们重新再看一遍，并且边看边做笔记。<br>杨老师首先从立意、人物、事件三方面讲起。用的素材是前三部电影，一部电影一个方面。关于电影的评述我不再多说，以后有可能的话会单独写成文。</p><p>在立意这方面，我并没有收获很多，毕竟这一点终究是依靠个人对于外界的体验认知。不过在后面的小说创作中，我再一次认识到其重要性，以及困难之处。对于立意，也许在动笔之前，我能够想很多，但是在动笔之后，总会想得更加深入，以至于文章主题模糊。这一点着实令我困扰。</p><p>而在人物方面，我收获的相对多一些。对于人物形象的五种概括，其精神形象、符号形象、经典形象、通俗形象、伪经典形象，只不过是概念上的阐释，我也不必多言。但是人物本身在小说中的地位却让我有所思考。作为小说立意的载体，人物本身应当是非常重要的。</p><blockquote><p>塑造有价值的人物是讲好故事的关键</p></blockquote><p>的确，故事是由人物产生的，立意也是有人物承载的。人物的行为应当包含这作者本身的态度，故事的发展也应该符合人物的行为逻辑。这一点是我从前从未注意到的。而后来，我对这话又有了其他思考。我的小说中常常有一个致命的缺陷，那便是过于无趣。无趣，便会导致读者看不下去。看不下去，那么无论小说的立意是多么深刻，后期剧情怎样的神展开，都是无济于事了。我原先以为是故事性太差的缘故，虽然的确有这样的原因，但是如今的我仔细思考，比起故事性，人物本身的无趣单调或许更为致命。若是有一个有趣的人物形象，那么即使是枯燥的故事想必也不会无聊了吧。由此亦能推之，现实生活的乏味不可避免，然而比起多姿多彩的生活，一个有趣的灵魂更为重要。<br>关于人物的另外一点，是杨老师提出的“铁三角理论”。三角形是几何图形中最为稳定的结构，这一性质，在各个领域都有运用。老师认为在文字领域亦是如此，一部优秀的小说，其中的关系必有稳定的三角关系，此处的关系已经不仅仅指人物了，一个事件，一个道具都可以成为这个三角形中的一角。乍一听，这理论甚是微妙，然而仔细一想，其中缘由不无道理。三角关系才能达成一种平衡，才更加稳固。</p><p>“铁三角理论”在事件中也有体现。一个事件由起因，经过，结果三段组成，每一段又可以包含几个小事件。事件的堆叠构成高潮迭起的故事，才能让人感觉完整，舒适。<br>事件中还有一点极为重要，那就是困境。老师说：<strong>你把主人公写得越惨，故事便越精彩</strong>。所以要为主人公设计一个主要的困境，解决主要困境的路上可以在多设计几个小的困境，是文章跌宕起伏。我认识到自己的确对于笔下的人物太过温柔，使得人物的目的模糊不清，导致无法继续有进展。而仔细回忆自己所看过的优秀故事，大多都是将主人公扔进一个意想不到的甚至是痛苦的困境之中，将其表面上和平的日常粉碎，挖出深藏于其中的矛盾，如此才使得小说更有张力。人物脱离困境之后也只有两种情况，绝境或是大团圆的境地。无论是那种境地，都是为了讲述出故事的内核。</p><p>这之后，杨老师借分析《贫民窟的百万富翁》为我们讲述了故事的结构。这部电影本身的故事结构便是非常精彩的，回忆中套着回忆，大故事中夹杂这小故事，最后在统一起来，让人感到酣畅淋漓。对于结构而言，其实我也并没有得到新的知识。但是对于分析故事本身的结构有了更多的经验，这的确也让我有所收获。而杨老师对于结构与意人事之间的关系倒也让人耳目一新。他认为两者一文一质，唯有文质彬彬，才是优秀的作品。</p><p>最后老师通过《泰坦尼克号》为我们分析了细节的重要性与情节设置的必要性，深层的分析，让人不得不感叹一部优秀的作品的确就是一个精致的艺术品。</p><p>至于我们的作业，是自己写一篇叙事性的作品，包括小说、剧本、叙事散文……不过所有人写得都是小说就是了。<br>我原先构思了一篇科幻，思索了好几个星期，却发现自己根本驾驭不了这样的题材，于是赶紧重新构思了一篇校园怪谈类小说，即《深夜派对》。这篇小说最终的成品也与我的最初的构思不同，一来是自己的能力的确不足，二来时间也不大允许。不过作为作业我还是可以接受的。<br>在讲评阶段，这篇小说的缺点也被指出来了。首先是现实部分与幻想部分之间的疏离感过重，让人感到有些脱节，之间的联系不是很大。然后是我本人的写作意识过重，导致前文并没能给人带来所期望的感觉。这一点我自己虽有所知觉，但没发现其所带来的问题。我写文时非常的困难，通常是将脑中的画面用仔细地描绘，这样就导致很多地方都被重点描绘，导致情感不明显。情感不明显也导致了最后一个问题，就是我施加给主人公的压力不够显著，会让人有种大题小做的感觉。虽然我本意是想将小说在修改一遍，不过时间是个问题，所以先加入日程吧。</p><p>为期八周的创意写作课便在作业讲评中结束了。其实这篇文章几周前就可以写了，但一直拖到今日才完成，也是因为这段时间比较忙。<br>这门课我受益匪浅，也知道了自己的缺陷。正所谓师傅领进门，修行靠个人，以后的练习还是得多靠我自己。最后献照一张，以纪念我的第一次创意写作课。<br><img src="创意写作课纪念照.jpg" alt></p>]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
      <category term="杂" scheme="http://kxjzxc.github.io/categories/%E6%9D%82/"/>
    
    
      <category term="杂" scheme="http://kxjzxc.github.io/tags/%E6%9D%82/"/>
    
  </entry>
  
  <entry>
    <title>【基础学习】大学物理——牛顿力学、刚体转动、相对论</title>
    <link href="http://kxjzxc.github.io/%E5%A4%A7%E5%AD%A6%E7%89%A9%E7%90%86%E2%80%94%E2%80%94%E7%89%9B%E9%A1%BF%E5%8A%9B%E5%AD%A6%E3%80%81%E5%88%9A%E4%BD%93%E8%BD%AC%E5%8A%A8%E3%80%81%E7%9B%B8%E5%AF%B9%E8%AE%BA.html"/>
    <id>http://kxjzxc.github.io/大学物理——牛顿力学、刚体转动、相对论.html</id>
    <published>2019-04-14T09:02:50.000Z</published>
    <updated>2019-06-24T12:35:13.799Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>昨天晚上考完了大物的期中考试，试卷意外地很简单，导致我莫名地有些担心期末考会难到爆炸，毕竟像这类先给颗糖让人尝尝甜头，再冷不防来一头闷棍的事情屡见不鲜，更不要说曾闻上届有很多人挂科……其实考试结果如何真的无所谓，只要及格我就心满意足了，毕竟我也不是靠这个混饭吃的。</p><p>近日迷上了思维导图，本身就不太喜欢听课的我就开始不负责任地自个儿搞自个儿的，边浪边学，最终也完成了几张不怎么靠谱的思维导图。其实原本是想通过写故事来总结的，但是发现自己实在是狂妄至极，知识还没有学透就想着用这样的需要极高熟练度及想象力的方法，于是便不了了之。</p><p>思维导图本身有没有用处我倒是不知道，但是做思维导图的过程倒是有用，至少让我的对这些知识有了个大致的了解。从前我的学习状态大多处于那种学到某一个地方明白了，换到另一个地方就忘记了。思维导图的精炼描述倒是容易让我想起来曾经学过的东西。</p><p>以下便是我做的三份思维导图了，只有由于是期中考试，所以只有牛顿力学、刚体转动、相对论三张。运动学没有，因为时间不够。<br><img src="/大学物理——牛顿力学、刚体转动、相对论/牛顿力学.png"><br><img src="/大学物理——牛顿力学、刚体转动、相对论/刚体转动.png"><br><img src="/大学物理——牛顿力学、刚体转动、相对论/相对论.png"></p><p>由于是图片格式，所以备注不可见，若有好奇的、或是想要更好体验的不妨下载文末的文件，于Xmind8中一览。<br> <a href="/2019/04/14/大学物理——牛顿力学、刚体转动、相对论/大学物理（一）.zip">点击下载</a></p>]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
      <category term="杂" scheme="http://kxjzxc.github.io/categories/%E6%9D%82/"/>
    
    
      <category term="杂" scheme="http://kxjzxc.github.io/tags/%E6%9D%82/"/>
    
  </entry>
  
  <entry>
    <title>基于canvas的鼠标画图功能</title>
    <link href="http://kxjzxc.github.io/%E5%9F%BA%E4%BA%8Ecanvas%E7%9A%84%E9%BC%A0%E6%A0%87%E7%94%BB%E5%9B%BE%E5%8A%9F%E8%83%BD.html"/>
    <id>http://kxjzxc.github.io/基于canvas的鼠标画图功能.html</id>
    <published>2019-04-08T15:37:47.000Z</published>
    <updated>2019-05-15T01:54:01.220Z</updated>
    
    <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><script class="meting-secondary-script-marker" src="/assets/js/Meting.min.js"></script><p>在别人的前端demo中看到了鼠标画图这一项目，略感兴趣，于是读其代码，实现其功能。</p><!--![点此体验](/2019/04/08/基于canvas的鼠标画图功能/mouseDraw.html)--><p><a href="/2019/04/08/基于canvas的鼠标画图功能/mouseDraw.html">点此体验</a></p><p>用鼠标画图的功能不是很难，原代码将html、css、javascript全部放在一份文档里都不算长。为了更好的阅读，我将其分成了三份。</p><h4 id="html"><a href="#html" class="headerlink" title="html"></a>html</h4><p>在<code>&lt;head&gt;</code>标签中引用css和javascript代码<br>在<code>&lt;body&gt;</code>标签中构造按钮区域以及canvas画布<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html; charset=utf-8"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">title</span>&gt;</span>鼠标画图<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"mouseDraw.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"mouseDraw.css"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"button"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"重画"</span>/&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> <span class="comment">&lt;!--定义画布元素，宽高要写在标签里。</span></span><br><span class="line"><span class="comment">     若在css文件设置，虽然canvas标签的大小会正常显示，绘制的图形则会按照缺省宽高比例放大缩小，缺省的高度是300px，宽度是150px--&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"can"</span> <span class="attr">width</span>=<span class="string">"500px"</span> <span class="attr">height</span>=<span class="string">"500px"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h4 id="css"><a href="#css" class="headerlink" title="css"></a>css</h4><p>无解说<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*允许中文字符*/</span></span><br><span class="line">@<span class="keyword">charset</span> <span class="string">"utf-8"</span>;</span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line"> <span class="attribute">background</span>: <span class="number">#CCC</span>;</span><br><span class="line"> <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#button</span>&#123;</span><br><span class="line"> <span class="attribute">margin</span>: <span class="number">50px</span> auto;</span><br><span class="line"> <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#can</span>&#123;</span><br><span class="line"> <span class="attribute">background</span>: white;</span><br><span class="line"> <span class="attribute">margin-top</span>: -<span class="number">50px</span>;</span><br><span class="line"> <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="javascript"><a href="#javascript" class="headerlink" title="javascript"></a>javascript</h4><p>1.创建画布<br>2.获取按键元素，并赋予清除功能<br>3.画布中实现画图功能<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">window</span>.onload=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"> <span class="comment">//获取&lt;canvas&gt;元素</span></span><br><span class="line"> <span class="keyword">var</span> can=<span class="built_in">document</span>.getElementById(<span class="string">"can"</span>);</span><br><span class="line"> <span class="comment">//创建画布对象</span></span><br><span class="line"> <span class="keyword">var</span> con=can.getContext(<span class="string">"2d"</span>);</span><br><span class="line"> <span class="comment">//获取按键元素，此处是通过标签名得到的变量，是数组变量</span></span><br><span class="line"> <span class="keyword">var</span> inp=<span class="built_in">document</span>.getElementsByTagName(<span class="string">"input"</span>);</span><br><span class="line"> <span class="comment">//清空画布.canvas每当高度或宽度被重设时，画布内容就会被清空,（此方法仅限需要清除全部内容的情况）</span></span><br><span class="line"> inp[<span class="number">0</span>].onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  can.width=can.width;</span><br><span class="line"> &#125;</span><br><span class="line"> <span class="comment">//当用户按下鼠标按钮执行Javascript代码</span></span><br><span class="line"> can.onmousedown=<span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//兼容各个浏览器。</span></span><br><span class="line">  <span class="comment">//在FireFox浏览器中，事件绑定的函数要获取到事件本身，需要从函数中传入，而IE等浏览器则可以直接使用event或者window.event得到事件本身。</span></span><br><span class="line">  <span class="keyword">var</span> ev=ev||event;</span><br><span class="line">  <span class="comment">/* moveTo:定义一个起点</span></span><br><span class="line"><span class="comment">    client系列:可视区域</span></span><br><span class="line"><span class="comment">    clientX： 相对文档的水平坐标</span></span><br><span class="line"><span class="comment">    clientY： 相对文档的垂直坐标</span></span><br><span class="line"><span class="comment">    offsetLeft： 对象相对于版面或由 offsetParent 左侧位置</span></span><br><span class="line"><span class="comment">    offsetTop：对象相对于版面或由 offsetTop 顶端位置</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="comment">//document.write(ev.clientX-can.offsetLeft);</span></span><br><span class="line">  con.moveTo(ev.clientX-can.offsetLeft,ev.clientY-can.offsetTop);</span><br><span class="line">  <span class="comment">//当鼠标指针移动到图像上时执行一段Javascript代码</span></span><br><span class="line">  <span class="built_in">document</span>.onmousemove=<span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">var</span> ev=ev||event;</span><br><span class="line">   <span class="comment">//lineTo() 方法添加一个新点，然后创建从该点到画布中最后指定点的线条（该方法并不会创建线条）。</span></span><br><span class="line">   con.lineTo(ev.clientX-can.offsetLeft,ev.clientY-can.offsetTop);</span><br><span class="line">   <span class="comment">//stroke() 方法会实际地绘制出通过 moveTo() 和 lineTo() 方法定义的路径。默认颜色是黑色。</span></span><br><span class="line">   con.stroke();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//当鼠标释放时执行一段Javascript代码</span></span><br><span class="line">  <span class="built_in">document</span>.onmouseup=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   <span class="comment">//鼠标释放后这些事件不再触发函数</span></span><br><span class="line">   <span class="built_in">document</span>.onmousedown=<span class="built_in">document</span>.onmousemove=<span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="尚需改进之处"><a href="#尚需改进之处" class="headerlink" title="尚需改进之处"></a>尚需改进之处</h4><p>1.该清除为擦除<br>2.改变画笔颜色大小等属性<br>3.改变画布大小<br>4.待定</p>]]></content>
    
    <summary type="html">
    
       
    
    </summary>
    
      <category term="计算机" scheme="http://kxjzxc.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/"/>
    
      <category term="程序" scheme="http://kxjzxc.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E7%A8%8B%E5%BA%8F/"/>
    
      <category term="前端" scheme="http://kxjzxc.github.io/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA/%E7%A8%8B%E5%BA%8F/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="前端" scheme="http://kxjzxc.github.io/tags/%E5%89%8D%E7%AB%AF/"/>
    
  </entry>
  
</feed>
